---
title: "Getting Started with medfit"
format: html
execute:
  collapse: true
  comment: "#>"
  eval: false
---

## What is medfit?

**medfit** provides unified infrastructure for mediation analysis in R. It offers:

- **S7-based classes** for standardized mediation data structures
- **Generic functions** for model fitting, extraction, and inference
- **Foundation** for specialized mediation packages (probmed, RMediation, medrobust)

## Quick Start

### Create a Mediation Data Object

```{r}
#| label: create-med
# Simple mediation: X -> M -> Y
med_data <- MediationData(
  a_path = 0.5,           # X -> M effect
  b_path = 0.3,           # M -> Y effect (controlling for X)
  c_prime = 0.2,          # X -> Y direct effect
  treatment = "X",
  mediator = "M",
  outcome = "Y",
  estimates = c(a = 0.5, b = 0.3, c_prime = 0.2),
  vcov = diag(3) * 0.01,  # Covariance matrix
  n_obs = 100L,
  converged = TRUE,
  source_package = "medfit"
)

# View the object
print(med_data)
```

### Compute Indirect Effect

```{r}
#| label: indirect
# Indirect effect = a * b
med_data@a_path * med_data@b_path
```

### Serial Mediation

For serial mediation (X -> M1 -> M2 -> Y):

```{r}
#| label: serial
serial_data <- SerialMediationData(
  a_path = 0.4,           # X -> M1
  d_path = 0.5,           # M1 -> M2
  b_path = 0.3,           # M2 -> Y
  c_prime = 0.2,          # X -> Y direct effect
  treatment = "X",
  mediators = c("M1", "M2"),
  outcome = "Y",
  estimates = c(a = 0.4, d = 0.5, b = 0.3, c_prime = 0.2),
  vcov = diag(4) * 0.01,
  mediator_predictors = list(M1 = "X", M2 = c("X", "M1")),
  outcome_predictors = c("X", "M1", "M2"),
  n_obs = 100L,
  converged = TRUE,
  source_package = "medfit"
)

# Serial indirect effect = a * d * b
serial_data@a_path * serial_data@d_path * serial_data@b_path
```

## Main Functions

medfit provides three generic functions:

1. **`extract_mediation()`** - Extract mediation structure from fitted models (lm/glm, lavaan)
2. **`fit_mediation()`** - Fit mediation models directly
3. **`bootstrap_mediation()`** - Bootstrap inference for confidence intervals

## Learn More

- [Introduction to medfit](introduction.html) - Detailed S7 class documentation
- [Model Extraction](extraction.html) - Extract from lm, glm, lavaan models
- [Bootstrap Inference](bootstrap.html) - Parametric and nonparametric bootstrap

## Development Status

medfit is under active development:

- âœ… Phase 2 Complete: S7 class architecture
- âœ… Phase 3 Complete: Model extraction (lm/glm, lavaan)
- ðŸš§ Phase 4 In Progress: Model fitting
- ðŸ“‹ Planned: Bootstrap infrastructure

See `NEWS.md` for the latest updates.
