[{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":null,"dir":"","previous_headings":"","what":"CLAUDE.md for medfit Package","title":"CLAUDE.md for medfit Package","text":"file provides guidance Claude Code (claude.ai/code) working code repository.","code":""},{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":"about-this-package","dir":"","previous_headings":"","what":"About This Package","title":"CLAUDE.md for medfit Package","text":"medfit foundation package providing unified infrastructure fitting mediation models, extracting path coefficients, performing bootstrap inference. eliminates redundancy across mediation analysis ecosystem (probmed, RMediation, medrobust) providing shared S7-based classes methods.","code":""},{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":"core-mission","dir":"","previous_headings":"About This Package","what":"Core Mission","title":"CLAUDE.md for medfit Package","text":"Provide clean, efficient, type-safe infrastructure mediation model handling can shared across multiple effect size computation packages, reducing code duplication ensuring consistency.","code":""},{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":"package-ecosystem-context","dir":"","previous_headings":"About This Package","what":"Package Ecosystem Context","title":"CLAUDE.md for medfit Package","text":"medfit foundation : Uses medfit : model fitting, extraction, bootstrap Adds: P_med computation, visualization Uses medfit : model extraction, bootstrap utilities Adds: Distribution Product, MBCO tests, MC methods Uses medfit : optional naive estimates, bootstrap Adds: Bounds computation, falsification tests Key Principle: medfit provides infrastructure, effect sizes. dependent package focuses unique methodological contribution.","code":""},{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":"key-references","dir":"","previous_headings":"About This Package","what":"Key References","title":"CLAUDE.md for medfit Package","text":"Tofighi, D. (2025). medfit: Infrastructure mediation analysis R. (preparation) Related: probmed, RMediation, medrobust package documentation","code":""},{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":"common-development-commands","dir":"","previous_headings":"","what":"Common Development Commands","title":"CLAUDE.md for medfit Package","text":"Preferred Tools: Use devtools usethis packages R package development tasks. provide convenient wrappers best practices package development workflows.","code":""},{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":"package-building-and-checking","dir":"","previous_headings":"Common Development Commands","what":"Package Building and Checking","title":"CLAUDE.md for medfit Package","text":"","code":"# Install package dependencies remotes::install_deps(dependencies = TRUE)  # Check package (standard R CMD check) rcmdcheck::rcmdcheck(args = \"--no-manual\", error_on = \"error\")  # Build package devtools::build()  # Install and reload during development devtools::load_all()"},{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":"documentation","dir":"","previous_headings":"Common Development Commands","what":"Documentation","title":"CLAUDE.md for medfit Package","text":"pkgdown Website Building: package uses pkgdown generate website package documentation. Configuration _pkgdown.yml. Workflow: 1. Update _pkgdown.yml adding new exported functions classes - Add new classes “S7 Classes” section reference: - Add new functions appropriate sections - Example: adding SerialMediationData, must add reference index Build check site: Common issues: “Topic missing index”: Add topic _pkgdown.yml reference section “URL ok”: Ensure DESCRIPTION correct URL field Non-ASCII characters: Replace ASCII equivalents (-> instead →, * instead ×) pkgdown Configuration Essentials: - Reference index must list exported topics - Group related functions/classes together better organization - Use starts_with() patterns methods (print, summary, etc.) - Website builds docs/ directory MathJax LaTeX Equations: Equation syntax differs context. Use correct format file type:","code":"# Generate documentation from roxygen2 comments devtools::document()  # Build vignettes devtools::build_vignettes()  # Build pkgdown site pkgdown::build_site() pkgdown::build_site()"},{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":"id_1-function-documentation-roxygen2--rd-files","dir":"","previous_headings":"Common Development Commands","what":"1. Function Documentation (roxygen2 / .Rd files)","title":"CLAUDE.md for medfit Package","text":"Use Rd macros help pages (?function): Rules: - \\eqn{latex}{ascii} - inline (two arguments: LaTeX + ASCII fallback) - \\deqn{latex}{ascii} - display/block math - Single argument form: \\eqn{latex} uses text - whitespace command arguments! - R 4.2+ supports MathJax/KaTeX rendering HTML help pages","code":"#' The indirect effect is \\eqn{a \\times b}{a * b} #' #' Sampling distribution: #' \\deqn{N(\\hat{\\theta}, \\hat{\\Sigma})}{N(theta-hat, Sigma-hat)}"},{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":"id_2-quarto-vignettesarticles-qmd-files","dir":"","previous_headings":"Common Development Commands","what":"2. Quarto Vignettes/Articles (.qmd files)","title":"CLAUDE.md for medfit Package","text":"Use standard LaTeX dollar signs:","code":"The indirect effect is $a \\times b$ where $a$ is the X->M path.  The sampling distribution is: $$\\hat{\\theta} \\sim N(\\theta, \\Sigma)$$"},{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":"id_3-pkgdown-configuration","dir":"","previous_headings":"Common Development Commands","what":"3. pkgdown Configuration","title":"CLAUDE.md for medfit Package","text":"Enable MathJax _pkgdown.yml:","code":"template:   bootstrap: 5   math-rendering: mathjax"},{"path":[]},{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":"id_5-avoid-unicode-math-characters","dir":"","previous_headings":"Common Development Commands","what":"5. Avoid Unicode Math Characters","title":"CLAUDE.md for medfit Package","text":".Rd files roxygen2 comments: - DON’T use: θ, Σ, θ̂ (causes LaTeX PDF errors) - use: \\eqn{\\theta}, \\eqn{\\Sigma}, \\eqn{\\hat{\\theta}} .qmd files, Unicode acceptable LaTeX preferred consistency. Quarto Vignettes pkgdown Workflow: ensure Quarto vignettes pass workflow checks render correctly GitHub: Initial Setup: automatically: Creates gh-pages branch hosting Generates .github/workflows/pkgdown.yaml Updates DESCRIPTION _pkgdown.yml site URL Declare Dependencies: List vignette dependencies DESCRIPTION Suggests website-dependencies, use Config/Needs/website field: ensures CI installs without cluttering package dependencies Quarto Support: pkgdown automatically detects renders Quarto vignettes Vignettes appear articles/ section website special configuration needed basic Quarto files Quarto Code Chunk Format (PREFERRED): Use Quarto’s hash-pipe (#|) syntax chunk options, R Markdown inline syntax: CORRECT (Quarto format): INCORRECT (R Markdown format): Key differences: Chunk label: #| label: chunk-name ({r chunk-name}) Options separate lines #| prefix Boolean values: true/false (TRUE/FALSE) Use hyphens labels: -chunk (my_chunk) Common chunk options: Computationally Expensive Vignettes: vignette code slow requires credentials, use Articles instead: Articles rendered pkgdown included R CMD check Prevents timeouts failures CI servers Use : heavy simulations, API examples requiring keys, large data processing Common Workflow Failures: Missing system libraries: Ensure system dependencies available CI runner Malformed markdown: Use consistent header levels (#, ##) NEWS.md Branch permissions: Workflow needs write access gh-pages branch Missing dependencies: Check packages used vignettes DESCRIPTION Workflow Checklist: Run usethis::use_pkgdown_github_pages() initial setup Add vignette dependencies DESCRIPTION Suggests Config/Needs/website Convert heavy vignettes Articles usethis::use_article() Test locally pkgdown::build_site() pushing Verify GitHub Actions permission deploy gh-pages","code":"# Initialize pkgdown with GitHub Pages support usethis::use_pkgdown_github_pages() Config/Needs/website: ggplot2, dplyr, tidyr ```{r} #| label: my-chunk #| eval: false #| echo: true x <- 1 + 1 ``` ```{r my-chunk, eval=FALSE, echo=TRUE} x <- 1 + 1 ``` #| label: chunk-name #| eval: false #| echo: true #| warning: false #| message: false #| fig-width: 8 #| fig-height: 6 usethis::use_article(\"article-name\")"},{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":"testing","dir":"","previous_headings":"Common Development Commands","what":"Testing","title":"CLAUDE.md for medfit Package","text":"","code":"# Run all tests devtools::test()  # Run specific test file testthat::test_file(\"tests/testthat/test-classes.R\")  # Check coverage covr::package_coverage()"},{"path":[]},{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":"r-version-and-style","dir":"","previous_headings":"Coding Standards","what":"R Version and Style","title":"CLAUDE.md for medfit Package","text":"Minimum R version: 4.1.0 (native pipe |> support) OOP Framework: S7 (modern object system) Style: tidyverse style guide native pipe Roxygen2: Use roxygen2 documentation (>= 7.3.0) Clarity priority: Code must readable maintainable","code":""},{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":"naming-conventions","dir":"","previous_headings":"Coding Standards","what":"Naming Conventions","title":"CLAUDE.md for medfit Package","text":"package uses snake_case consistently: Functions: - Main exports: fit_mediation(), extract_mediation(), bootstrap_mediation() - Internal functions prefix dot: .fit_mediation_glm(), .bootstrap_parametric() Arguments: - formula_y, formula_m model specifications - treatment, mediator, outcome variable names - engine modeling engine: “glm”, “lmer”, “brms” - method inference method: “parametric”, “nonparametric”, “plugin” - n_boot number bootstrap samples - ci_level confidence level (default: 0.95) S7 Classes: - CamelCase: MediationData, BootstrapResult - Properties use snake_case: @a_path, @boot_estimates","code":""},{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":"code-documentation-style","dir":"","previous_headings":"Coding Standards","what":"Code Documentation Style","title":"CLAUDE.md for medfit Package","text":"General Principles: - Comment “”, “” - explain reasoning, obvious operations - explanatory comments tricky code - shortcuts, clever tricks, non-obvious logic deserve explanation - Inline citations statistical methods - e.g., # Per VanderWeele (2014), four-way decomposition... - Self-documenting code first - use clear variable names, add comments context -line Comment Examples: Section Headers Functions: Use # --- Section Name --- functions longer ~30 lines: roxygen2 Documentation: Prefer concise @description detailed @details: TODO/FIXME Conventions:","code":"# BAD - explains what (obvious) x <- x + 1  # add 1 to x  # GOOD - explains why x <- x + 1  # Adjust for 1-based indexing expected by lavaan  # GOOD - explains tricky shortcut # Use outer product for efficient pairwise computation (O(n²) memory but O(1) loops) pairwise_diff <- outer(x, x, `-`)  # GOOD - inline citation # Per VanderWeele (2014), the four-way decomposition requires: TE = CDE + INTref + INTmed + PIE my_function <- function(...) {   # --- Validate Inputs ---   ...    # --- Extract Parameters ---   ...    # --- Compute Results ---   ...    # --- Return ---   ... } #' Extract Mediation Structure from Fitted Models #' #' @description #' Generic function to extract mediation paths (a, b, c') and #' variance-covariance matrices from fitted models. #' #' @param object Fitted model object (lm, glm, lavaan) #' @param treatment Character: treatment variable name #' #' @return A [MediationData] object #' #' @details #' ## Supported Model Types #' #' - **lm/glm**: Requires separate mediator and outcome models #' - **lavaan**: Extracts from SEM; auto-detects paths if labeled #' #' ## Mathematical Background #' #' The indirect effect is \\eqn{a \\times b}{a * b} where: #' - \\eqn{a} = effect of X on M (from mediator model) #' - \\eqn{b} = effect of M on Y controlling for X (from outcome model) #' #' Per Baron & Kenny (1986), mediation requires significant a and b paths. #' #' @references #' Baron RM, Kenny DA (1986). The moderator-mediator variable distinction. #' *Journal of Personality and Social Psychology*, 51(6), 1173-1182. #' #' @examples #' \\dontrun{ #' fit_m <- lm(M ~ X + C, data = mydata) #' fit_y <- lm(Y ~ X + M + C, data = mydata) #' med_data <- extract_mediation(fit_m, model_y = fit_y, #'                               treatment = \"X\", mediator = \"M\") #' } #' #' @seealso [MediationData], [fit_mediation()] #' @export # TODO: Add support for multiple mediators (issue #42) # FIXME: Breaks when n < 10, needs better error handling # HACK: Workaround for lavaan bug, remove when fixed upstream # NOTE: Assumes Gaussian residuals for variance computation"},{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":"code-organization","dir":"","previous_headings":"Coding Standards","what":"Code Organization","title":"CLAUDE.md for medfit Package","text":"","code":"R/ ├── aaa-imports.R           # Package imports and setup ├── aab-generics.R          # S7 generic functions (must load before methods) ├── medfit-package.R        # Package documentation ├── classes.R               # S7 class definitions ├── fit-glm.R              # GLM engine implementation ├── extract-lm.R           # lm/glm extraction ├── extract-lavaan.R       # lavaan extraction ├── bootstrap.R            # Bootstrap infrastructure ├── utils.R                # Utility functions └── zzz.R                  # .onLoad() for dynamic dispatch"},{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":"defensive-programming","dir":"","previous_headings":"","what":"Defensive Programming","title":"CLAUDE.md for medfit Package","text":"Defensive programming employs multi-layered approach: strict input validation, formal object definitions, automated testing, continuous integration.","code":""},{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":"id_1-input-validation-with-checkmate","dir":"","previous_headings":"Defensive Programming","what":"1. Input Validation with checkmate","title":"CLAUDE.md for medfit Package","text":"ALWAYS use checkmate function argument validation. provides fast (C-based), memory-efficient assertions informative error messages. Required import R/aaa-imports.R: Common assertion patterns: Key checkmate functions: Options assertions: - .var.name = \"name\": Custom variable name error message - null.ok = TRUE: Allow NULL values - add = collection: Add assertion collection batch checking Quick assertions qassert:","code":"#' @import checkmate my_function <- function(x, n, method, data, optional_arg = NULL) {   # --- Input Validation (using checkmate for fail-fast defensive programming) ---    # Type assertions   checkmate::assert_numeric(x, .var.name = \"x\")   checkmate::assert_count(n, positive = TRUE, .var.name = \"n\")   checkmate::assert_string(method, .var.name = \"method\")   checkmate::assert_data_frame(data, .var.name = \"data\")    # Optional arguments (allow NULL)   checkmate::assert_string(optional_arg, null.ok = TRUE, .var.name = \"optional_arg\")    # Choice from options   checkmate::assert_choice(method, choices = c(\"parametric\", \"nonparametric\", \"plugin\"),                            .var.name = \"method\")    # Class checks (multiple allowed classes)   checkmate::assert_multi_class(model, classes = c(\"lm\", \"glm\"), .var.name = \"model\")    # Logical flags    checkmate::assert_flag(verbose, .var.name = \"verbose\")    # Variable exists in data   checkmate::assert_choice(treatment, choices = names(data),                            .var.name = \"treatment in data\")    # ... rest of function } # Compact type checking checkmate::qassert(x, \"N1\")   # Numeric, length 1 checkmate::qassert(x, \"S1\")   # String, length 1 checkmate::qassert(x, \"B1\")   # Boolean/logical, length 1 checkmate::qassert(x, \"X\")    # NULL checkmate::qassert(x, \"N+\")   # Numeric, length >= 1"},{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":"id_2-handling-ellipsis-","dir":"","previous_headings":"Defensive Programming","what":"2. Handling Ellipsis (...)","title":"CLAUDE.md for medfit Package","text":"using ... function arguments, validate passed arguments actually used: matters: Without checking, misspelled arguments silently ignored:","code":"my_function <- function(x, ...) {   # Check that all ... arguments are used   rlang::check_dots_used()    # Or for stricter checking (error on unused dots)   rlang::check_dots_empty()    # ... rest of function } # User typo: \"treamtent\" instead of \"treatment\" extract_mediation(fit, treamtent = \"X\")  # Silently ignored without check!"},{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":"id_3-s7-class-validation-already-in-use","dir":"","previous_headings":"Defensive Programming","what":"3. S7 Class Validation (Already in Use)","title":"CLAUDE.md for medfit Package","text":"S7 provides automatic type validation property declarations custom validators: S7 + checkmate complement : - S7 validators: Class-level constraints, cross-property validation - checkmate: Function argument validation (fail-fast entry point)","code":"MyClass <- S7::new_class(   \"MyClass\",   properties = list(     # Automatic type checking     x = S7::class_numeric,     name = S7::class_character   ),   validator = function(self) {     # Custom validation for cross-property constraints     if (length(self@x) != 1) {       return(\"x must be scalar\")     }     if (any(self@x < 0)) {       return(\"x must be non-negative\")     }     NULL  # Return NULL if valid   } )"},{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":"id_4-testing-strategy","dir":"","previous_headings":"Defensive Programming","what":"4. Testing Strategy","title":"CLAUDE.md for medfit Package","text":"Four-layer testing approach: Unit Testing (testthat) Acceptance Testing: Validate user workflows end--end Code Coverage (covr) Snapshot Testing: complex outputs","code":"test_that(\"function handles edge cases\", {   expect_error(my_func(NULL), \"must not be NULL\")   expect_equal(my_func(0), expected_value) }) # Target: >80% coverage, 100% for critical paths covr::package_coverage() test_that(\"print output is stable\", {   expect_snapshot(print(my_object)) })"},{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":"id_5-dependency-management","dir":"","previous_headings":"Defensive Programming","what":"5. Dependency Management","title":"CLAUDE.md for medfit Package","text":"CRITICAL rules: Never use library() require() inside package functions alter global search path Use explicit namespacing: package::function() Imports vs Suggests: Imports: Required packages (always available) Suggests: Optional packages (check availability) Version pinning DESCRIPTION:","code":"# For Suggested packages, check availability if (!requireNamespace(\"lavaan\", quietly = TRUE)) {   stop(\"Package 'lavaan' is required but not installed.\", call. = FALSE) } lavaan::sem(model, data = data) Imports:     S7 (>= 0.1.0),     checkmate Suggests:     lavaan (>= 0.6-0)"},{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":"id_6-managing-state-and-side-effects","dir":"","previous_headings":"Defensive Programming","what":"6. Managing State and Side Effects","title":"CLAUDE.md for medfit Package","text":"Clean side effects .exit(): File system hygiene: - Never write user’s home directory - Use tempdir() temporary files - Use tools::R_user_dir(\"medfit\", \"cache\") persistent cache Prefer pure functions: - Return values instead modifying place - Avoid global state modifications","code":"my_function <- function(...) {   # Save current state   old_opts <- options(warn = 2)   old_wd <- getwd()    # Ensure cleanup even if function errors   on.exit({     options(old_opts)     setwd(old_wd)   }, add = TRUE)    # ... function body }"},{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":"id_7-continuous-integration-ci","dir":"","previous_headings":"Defensive Programming","what":"7. Continuous Integration (CI)","title":"CLAUDE.md for medfit Package","text":"GitHub Actions workflow (.github/workflows/R-CMD-check.yaml): Static code analysis lintr:","code":"on:   push:     branches: [main, dev]   pull_request:     branches: [main]  name: R-CMD-check  jobs:   R-CMD-check:     runs-on: ${{ matrix.os }}     strategy:       matrix:         os: [ubuntu-latest, macos-latest, windows-latest]         r-version: ['release']      steps:       - uses: actions/checkout@v4        - uses: r-lib/actions/setup-r@v2         with:           r-version: ${{ matrix.r-version }}        - uses: r-lib/actions/setup-r-dependencies@v2         with:           extra-packages: any::rcmdcheck        - uses: r-lib/actions/check-r-package@v2 # .lintr file in package root linters: linters_with_defaults(   line_length_linter(120),   object_name_linter(styles = c(\"snake_case\", \"CamelCase\")) )"},{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":"id_8-defensive-programming-checklist","dir":"","previous_headings":"Defensive Programming","what":"8. Defensive Programming Checklist","title":"CLAUDE.md for medfit Package","text":"every new function: Add checkmate assertions arguments function entry Use .var.name parameter clear error messages Allow NULL appropriate null.ok = TRUE Check ... arguments rlang::check_dots_used() applicable Use explicit namespacing non-base functions Clean side effects .exit() Write tests error conditions Verify function works edge cases (NULL, empty, NA)","code":""},{"path":[]},{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":"s7-object-system","dir":"","previous_headings":"Code Architecture","what":"S7 Object System","title":"CLAUDE.md for medfit Package","text":"package uses S7 type-safe, modern object-oriented programming. Key S7 Classes: Properties: a_path, b_path, c_prime, estimates, vcov, data, etc. Validator ensures internal consistency product--two indirect effects (* b) Properties: a_path, d_path (vector), b_path, c_prime, mediators (vector), etc. Supports product--three (* d * b) product--k Flexible d_path: scalar 2 mediators, vector 3+ Extensible chains length Properties: estimate, ci_lower, ci_upper, boot_estimates, method Validator checks consistency Used packages inference S7 Generics: Methods: lm, glm, lavaan, (future: lmerMod, brmsfit) Returns: MediationData object Dispatcher engine-specific functions Returns: MediationData object Methods: parametric, nonparametric, plugin Returns: BootstrapResult object S7 Documentation Patterns: documenting S7 classes methods roxygen2: S7 Class Constructors: Use explicit @param tags properties S7 Methods: Use @noRd prevent namespace export issues Important: use @export S7 methods (causes namespace errors) use @name tag (causes duplicate .Rd files) Use @noRd document internally without generating .Rd files S7 methods work via automatic dispatch, namespace exports S7 Generics: document generic parameters, method-specific ones Testing S7 Methods: Method dispatch may work installed package context S7 Method Registration .onLoad(): REQUIRED per official S7 documentation Key points: S4_register() MUST called S7 class methods_register() methods_register() MUST .onLoad(), .onAttach() Import full methods package: @import methods (just @importFrom methods ) “Overwriting method” message devtools::load_all() known development-time issue (GitHub #474) - affect installed packages See: https://rconsortium.github.io/S7/articles/packages.html See: https://github.com/RConsortium/S7/issues/474 S7 S3 Class Integration: working S3 classes S7 packages, follow guide: Mandatory Package Setup: Call S7::methods_register() .onLoad() Required dynamic method registration Especially important methods generics packages Must call S4_register() class methods_register() Formalizing S3 Classes: Use new_S3_class() wrap S3 classes Built-S3 wrappers: S7 provides class_data.frame, class_Date, class_factor, etc. Inheriting S3 Classes: Requires custom constructor Calling Parent S3 Methods: Use S7_data(), super() Migrating S3 Packages S7: Incremental approach Add S7::methods_register() .onLoad() Wrap existing S3 classes new_S3_class() Gradually replace informal S3 formal new_class() definitions Existing S3 code continues work S7 objects retain S3 class attribute S7 S4 Class Integration: S7 S3 fully compatible, S7 S4 specific interoperability features limitations: Registration S4_register(): CRITICAL S4 compatibility required: S7 classes created runtime, visible S4 default Without registration, S4 dispatch won’t recognize class medfit: call S7::S4_register() immediately class definition Bidirectional Method Dispatch: S7 supports multiple combinations Inheritance Limitations - “Firewall”: CRITICAL RESTRICTION: S7 extend S4 classes matters: S7 inherit S4 (opposite direction may work) Major barrier Bioconductor ecosystem (S4-based) subclass core S4 structures like SummarizedExperiment Must use composition instead inheritance Workaround: Use composition Properties Slots: Equivalent concepts S7 properties ≈ S4 slots (added dynamics) Can use S4 class property type S4 class unions auto-convert new_union() Union handling differs: S4 dispatch time, S7 registration time Migration Strategy - Bottom-Approach: S7 inherit S4, migration requires careful planning: Step--step process: Identify S4 classes bottom hierarchy (children) Re-implement using new_class() Convert S4 slots → S7 properties Convert S4 validity methods → S7 validator functions Call S4_register() backward compatibility Move hierarchy, replacing parents children converted Example:","code":"#' MediationData S7 Class #' #' @description #' S7 class containing standardized mediation model structure #' #' @param a_path Numeric scalar: effect of treatment on mediator #' @param b_path Numeric scalar: effect of mediator on outcome #' # ... document ALL properties explicitly #' #' @return A MediationData S7 object #' @export MediationData <- S7::new_class(...) #' Print Method for MediationData #' #' @param x A MediationData object #' @param ... Additional arguments (ignored) #' @noRd S7::method(print, MediationData) <- function(x, ...) { ... } #' Extract Mediation Structure #' #' @param object Fitted model object #' @param ... Additional arguments passed to methods. Common arguments include: #'   - `treatment`: Character string (document in prose, not as @param) #'   - `mediator`: Character string (document in prose, not as @param) #' @export extract_mediation <- S7::new_generic(\"extract_mediation\", dispatch_args = \"object\") test_that(\"MediationData print method works\", {   skip_if_not(interactive(), \"S7 method dispatch issue in non-interactive mode\")   # ... test code }) # CORRECT - per https://rconsortium.github.io/S7/articles/packages.html .onLoad <- function(libname, pkgname) {   # 1. First register S7 classes with S4 system   S7::S4_register(MediationData)   S7::S4_register(SerialMediationData)   S7::S4_register(BootstrapResult)    # 2. Then register S7 methods for dispatch   S7::methods_register()    # 3. Register methods for Suggested packages (if available)   if (requireNamespace(\"lavaan\", quietly = TRUE)) {     tryCatch(.register_lavaan_method(), error = function(e) invisible(NULL))   } } # Register method for S3 class method(my_generic, new_S3_class(\"data.frame\")) <- function(x) {...}  # Use in property definitions MyClass <- new_class(\"MyClass\",   properties = list(     data = new_S3_class(\"data.frame\")   ) )  # Use in unions my_union <- new_union(class_numeric, new_S3_class(\"Date\")) # When inheriting from S3 via parent argument MyS7Class <- new_class(\"MyS7Class\",   parent = new_S3_class(\"integer\",     constructor = function(.data, ...) {       # .data must be first argument       # Add S3 class attributes     }   ) ) # INCORRECT - S3 generics don't understand super() method(print, MyClass) <- function(x) {   super(x, print)  # FAILS }  # CORRECT - Extract underlying S3 object method(print, MyClass) <- function(x) {   print(S7_data(x))  # Dispatches to S3 print method } # Define S7 class Foo <- new_class(\"Foo\", package = \"mypackage\")  # REQUIRED: Register with S4 system S4_register(Foo)  # Now can use with S4 generics method(S4_generic, Foo) <- function(x) \"Hello\" # S7 method on S4 generic (requires S4_register) method(S4_generic, S7_class) <- function(x) {...}  # S4 class on S7 generic method(S7_generic, S4_class) <- function(x) {...}  # Mixed signatures work method(my_generic, list(S7_class, S4_class)) <- function(x, y) {...} # INVALID - Will fail MyClass <- new_class(\"MyClass\", parent = SomeS4Class) # Instead of inheriting, wrap MyClass <- new_class(\"MyClass\",   properties = list(     s4_object = S4_class  # Contain, don't extend   ) ) # Old S4 class setClass(\"Foo\", slots = list(x = \"numeric\")) setValidity(\"Foo\", function(object) {   if (length(object@x) == 0) \"x must have length > 0\" })  # New S7 equivalent Foo <- new_class(\"Foo\",   properties = list(     x = class_numeric   ),   validator = function(self) {     if (length(self@x) == 0) {       \"x must have length > 0\"     }   } ) S4_register(Foo)  # Maintain S4 compatibility"},{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":"core-function-hierarchy","dir":"","previous_headings":"Code Architecture","what":"Core Function Hierarchy","title":"CLAUDE.md for medfit Package","text":"User-Facing Functions: convenient users Internally uses engine-specific functions Currently supports GLM engine Generic methods different model types Standardizes across packages Returns MediationData Three methods: parametric, nonparametric, plugin Parallel processing support Returns BootstrapResult Internal Functions: .fit_mediation_glm(): GLM engine implementation .bootstrap_parametric(): Parametric bootstrap .bootstrap_nonparametric(): Nonparametric bootstrap .bootstrap_plugin(): Plugin estimator Utility functions validation, formatting, etc.","code":""},{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":"key-dependencies","dir":"","previous_headings":"Code Architecture","what":"Key Dependencies","title":"CLAUDE.md for medfit Package","text":"Required: - S7: Modern object system - stats: GLM fitting, statistical functions - methods: S4 compatibility Suggested: - MASS: mvrnorm() parametric bootstrap - lavaan: SEM model extraction - lme4: Mixed models (future) Future Consideration: - OpenMx: SEM model extraction (postponed future release)","code":""},{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":"explicit-namespacing","dir":"","previous_headings":"Code Architecture","what":"Explicit Namespacing","title":"CLAUDE.md for medfit Package","text":"CRITICAL: non-base functions MUST use explicit namespacing:","code":"# CORRECT stats::glm(formula, data = data) MASS::mvrnorm(n, mu, Sigma) lavaan::sem(model, data = data)  # INCORRECT glm(formula, data = data) mvrnorm(n, mu, Sigma) sem(model, data = data)"},{"path":[]},{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":"s7-class-design","dir":"","previous_headings":"Important Implementation Details","what":"S7 Class Design","title":"CLAUDE.md for medfit Package","text":"MediationData (Simple Mediation): - Contains information simple mediation model (X -> M -> Y) - Path coefficients (, b, c’) - Full parameter vector covariance matrix - Residual variances (Gaussian models) - Variable names metadata - Data sample size SerialMediationData (Serial Mediation): - Contains information serial mediation (X -> M1 -> M2 -> … -> Y) - Path coefficients: a_path (scalar), d_path (vector), b_path (scalar), c_prime (scalar) - Flexible design: d_path scalar 2 mediators, vector 3+ - Vector properties: mediators (names), sigma_mediators (residual SDs) - List property: mediator_predictors (predictors mediator model) - Full parameter vector covariance matrix (like MediationData) Design principle: Complete information downstream packages","code":""},{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":"extensible-architecture-for-multiple-mediator-types","dir":"","previous_headings":"Important Implementation Details","what":"Extensible Architecture for Multiple Mediator Types","title":"CLAUDE.md for medfit Package","text":"package uses modular class design allows clean extension different mediation structures: Current Classes: - MediationData: Simple mediation (product--two: * b) - SerialMediationData: Serial mediation (product--three beyond: * d * b, * d21 * d32 * b, etc.) Design Principles: 1. Separate classes separate structures: mediation type gets class, optimized use case 2. Consistent interface: classes share common properties (estimates, vcov, metadata) 3. hard limits: Serial mediation supports chains length (2, 3, k mediators) 4. Extensible validators: class comprehensive validation tailored structure Future Extension Path: parallel mediation (X -> M1 -> Y, X -> M2 -> Y simultaneously): complex mediation (combinations serial parallel): - use graph representation nested structure - Keep simple: start separate classes, add complexity needed","code":"ParallelMediationData <- S7::new_class(   properties = list(     a_paths = numeric,      # Vector: c(a1, a2, ...)     b_paths = numeric,      # Vector: c(b1, b2, ...)     c_prime = numeric,      # Scalar: X -> Y direct effect     mediators = character,  # Vector: c(\"M1\", \"M2\", ...)     # ... common properties (estimates, vcov, etc.)   ) ) # Indirect effect = sum(a_paths * b_paths)"},{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":"treatment-mediator-interaction-vanderweele-four-way-decomposition","dir":"","previous_headings":"Important Implementation Details","what":"Treatment-Mediator Interaction (VanderWeele Four-Way Decomposition)","title":"CLAUDE.md for medfit Package","text":"Planned post-MVP release based VanderWeele (2014). Theoretical Foundation: treatment (X) mediator (M) interact effect outcome (Y), total effect decomposes four components: Decomposition: TE = CDE + INTref + INTmed + PIE Relationships: - NDE (Natural Direct Effect) = CDE + INTref - NIE (Natural Indirect Effect) = INTmed + PIE Regression Models: **Formulas (continuous Y/M, binary X: 0→1, m*=0)**: - CDE = θ₁ (effect X M=0) - INTref = θ₃(β₀ + β₂’c) (interaction reference) - INTmed = θ₃β₁ (mediated interaction) - PIE = θ₂β₁ (pure indirect effect) θ₃=0 (interaction): reduces standard mediation CDE=NDE=θ₁ NIE=PIE=θ₂β₁. InteractionMediationData Class (planned): Usage Pattern (planned): Key References: - VanderWeele TJ (2014). unification mediation interaction. Epidemiology, 25(5):749-61. - Valeri L, VanderWeele TJ (2013). Mediation analysis allowing exposure-mediator interactions. Psychological Methods, 18(2):137-150.","code":"Mediator:  M = β₀ + β₁X + β₂'C + εₘ Outcome:   Y = θ₀ + θ₁X + θ₂M + θ₃(X×M) + θ₄'C + εᵧ InteractionMediationData <- S7::new_class(   \"InteractionMediationData\",   package = \"medfit\",   properties = list(     # Core paths     a_path = S7::class_numeric,           # β₁: X → M     b_path = S7::class_numeric,           # θ₂: M → Y (main effect)     c_prime = S7::class_numeric,          # θ₁: X → Y (main effect)     interaction = S7::class_numeric,      # θ₃: X×M interaction      # Four-way components     cde = S7::class_numeric,              # Controlled Direct Effect     int_ref = S7::class_numeric,          # Reference Interaction     int_med = S7::class_numeric,          # Mediated Interaction     pie = S7::class_numeric,              # Pure Indirect Effect      # Derived effects     nde = S7::class_numeric,              # Natural Direct Effect     nie = S7::class_numeric,              # Natural Indirect Effect     total_effect = S7::class_numeric,      # Reference value     m_star = S7::class_numeric,           # Reference mediator level      # Standard properties (estimates, vcov, metadata, etc.)     ...   ) ) # Model with interaction fit_m <- lm(M ~ X + C, data = data) fit_y <- lm(Y ~ X + M + X:M + C, data = data)  # Extraction detects interaction, returns InteractionMediationData med_int <- extract_mediation(   fit_m, model_y = fit_y,   treatment = \"X\", mediator = \"M\",   m_star = 0  # Reference mediator level )  # Access four-way components med_int@cde; med_int@int_ref; med_int@int_med; med_int@pie"},{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":"decomposition-s7-class-planned","dir":"","previous_headings":"Important Implementation Details","what":"Decomposition S7 Class (Planned)","title":"CLAUDE.md for medfit Package","text":"Design Decision: Decomposition separate S7 class flexibility custom decompositions. Built-constructors: - two_way(nde, nie) → NDE + NIE decomposition - four_way(cde, int_ref, int_med, pie) → VanderWeele 4-way - custom_decomposition(...) → User-defined MediationData stores decompositions list, allowing multiple:","code":"Decomposition <- S7::new_class(   \"Decomposition\",   package = \"medfit\",   properties = list(     type = S7::class_character,        # \"two_way\", \"four_way\", \"custom\"     components = S7::class_list,       # Named list: list(nde = 0.3, nie = 0.2)     total = S7::class_numeric,         # Total effect     formula = S7::class_character      # \"NDE + NIE\" or \"CDE + INTref + INTmed + PIE\"   ),   validator = function(self) {     comp_sum <- sum(unlist(self@components))     if (abs(comp_sum - self@total) > 1e-10) {       \"Components must sum to total effect\"     }   } ) result@decompositions$two_way   # Decomposition object result@decompositions$four_way  # Decomposition object (when interaction present)"},{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":"user-interface-design","dir":"","previous_headings":"Important Implementation Details","what":"User Interface Design","title":"CLAUDE.md for medfit Package","text":"Hybrid approach: Simple strings common cases, helper functions advanced. Interaction handling: X:M detected → compute two-way four-way. design? - Clean separation: class handles one mediation type well - -engineering: Don’t add complexity hypothetical future needs - Easy extend: Adding new classes doesn’t break existing ones - Type safety: S7 validators ensure class used correctly","code":"# Simple (default) estimate_mediation(..., effects = \"natural\")  # NDE + NIE  # Effect options effects = \"natural\"        # NDE, NIE (default) effects = \"interventional\" # IDE, IIE effects = \"controlled\"     # CDE  # Advanced (helper functions) effects = natural_effects(variant = \"total\")  # TDE, TNIE effects = controlled_effects(m = 5)           # CDE at m=5"},{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":"engine-adapter-architecture-planned","dir":"","previous_headings":"Important Implementation Details","what":"Engine Adapter Architecture (Planned)","title":"CLAUDE.md for medfit Package","text":"medfit uses adapter pattern integrate external packages advanced estimation methods. Design principles: - Wrap validated implementations (CMAverse, tmle3) instead reimplementing - engines return standardized MediationData objects - External packages Suggests (load demand) - Engine-specific options via engine_args = list(...) Engine priority: Usage example: See planning/medfit-roadmap.md Phase 7c detailed adapter implementation.","code":"# Default regression engine estimate_mediation(   formula_y = Y ~ X + M + C,   formula_m = M ~ X + C,   data = df,   treatment = \"X\",   mediator = \"M\",   effects = \"natural\",     # NDE + NIE   engine = \"regression\"    # Default )  # CMAverse g-formula engine estimate_mediation(   ...,   engine = \"gformula\",   engine_args = list(     EMint = TRUE,          # Exposure-mediator interaction     nboot = 500            # CMAverse-specific bootstrap   ) )"},{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":"model-extraction-pattern","dir":"","previous_headings":"Important Implementation Details","what":"Model Extraction Pattern","title":"CLAUDE.md for medfit Package","text":"extract_mediation() methods follow pattern: Validate inputs (check variable names exist) Extract parameters (, b, c’ paths) Extract covariance matrix (inference) Extract residual variances (Gaussian) Get data (available) Create MediationData object Return","code":""},{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":"bootstrap-implementation","dir":"","previous_headings":"Important Implementation Details","what":"Bootstrap Implementation","title":"CLAUDE.md for medfit Package","text":"Three methods different trade-offs: Samples N(θ̂, Σ̂) Fast, requires normality Default applications Resamples data, refits models Robust, computationally intensive Use normality questionable Point estimate , CI Fastest, quick checks Parallel processing: - Uses parallel::mclapply() (Unix) similar - Auto-detects cores specified - Set seed reproducibility","code":""},{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":"dynamic-s7s4-dispatch","dir":"","previous_headings":"Important Implementation Details","what":"Dynamic S7/S4 Dispatch","title":"CLAUDE.md for medfit Package","text":"S4 classes suggested packages (e.g., lavaan): allows methods work without hard dependencies.","code":"# In R/zzz.R .onLoad <- function(libname, pkgname) {   # Register lavaan method if available   if (requireNamespace(\"lavaan\", quietly = TRUE)) {     lavaan_class <- S7::as_class(methods::getClass(\"lavaan\", where = \"lavaan\"))     S7::method(extract_mediation, lavaan_class) <- extract_mediation_lavaan   }    # Note: OpenMx integration postponed to future release }"},{"path":[]},{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":"unit-tests-should-cover","dir":"","previous_headings":"Testing Strategy","what":"Unit Tests Should Cover","title":"CLAUDE.md for medfit Package","text":"Property type checking Validators catch invalid inputs Edge cases (empty, NA, wrong dimensions) lm/glm extraction accuracy lavaan extraction consistency Identical results manual extraction Proper handling different model types GLM engine produces valid MediationData Formula parsing correct Family specifications work Error handling convergence failures Parametric bootstrap reproducible seed Nonparametric bootstrap reproducible seed Plugin method fast accurate CI coverage simulations (~95% 95% CI) Parallel sequential give results (seed) Small sample sizes (n < 50) Non-convergent models Singular covariance matrices Missing data Zero effects","code":""},{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":"test-organization","dir":"","previous_headings":"Testing Strategy","what":"Test Organization","title":"CLAUDE.md for medfit Package","text":"","code":"tests/testthat/ ├── helper-test-data.R      # Test data generators ├── test-classes.R          # S7 class validation ├── test-extract-lm.R       # lm/glm extraction ├── test-extract-lavaan.R   # lavaan extraction ├── test-fit-glm.R          # GLM fitting ├── test-bootstrap.R        # Bootstrap methods └── test-utils.R            # Utility functions"},{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":"coverage-expectations","dir":"","previous_headings":"Testing Strategy","what":"Coverage Expectations","title":"CLAUDE.md for medfit Package","text":"Target: >90% overall coverage S7 class definitions Core extraction functions Bootstrap methods","code":""},{"path":[]},{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":"probmed-integration","dir":"","previous_headings":"Integration with Dependent Packages","what":"probmed Integration","title":"CLAUDE.md for medfit Package","text":"probmed : - Import medfit - Replace extraction code medfit::extract_mediation() - Replace bootstrap code medfit::bootstrap_mediation() - Keep formula interface wrapper around medfit - Add P_med-specific computation Backward compatibility critical: probmed users see changes","code":""},{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":"rmediation-integration","dir":"","previous_headings":"Integration with Dependent Packages","what":"RMediation Integration","title":"CLAUDE.md for medfit Package","text":"RMediation : - Import medfit - Replace extraction code medfit::extract_mediation() - Optionally use bootstrap utilities - Keep unique methods (DOP, MBCO, MC)","code":""},{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":"medrobust-integration","dir":"","previous_headings":"Integration with Dependent Packages","what":"medrobust Integration","title":"CLAUDE.md for medfit Package","text":"medrobust : - Suggest medfit (optional) - Optionally use naive estimates - Keep unique methods (bounds, falsification)","code":""},{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":"coordination","dir":"","previous_headings":"Integration with Dependent Packages","what":"Coordination","title":"CLAUDE.md for medfit Package","text":"making changes affect: - S7 class structure → Coordinate packages - Extraction API → Coordinate probmed RMediation - Bootstrap API → Coordinate packages Versioning: - Use semantic versioning - Breaking changes → major version bump - New features → minor version bump - Bug fixes → patch version bump","code":""},{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":"development-roadmap","dir":"","previous_headings":"","what":"Development Roadmap","title":"CLAUDE.md for medfit Package","text":"See planning/medfit-roadmap.md detailed implementation plan.","code":""},{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":"current-phase-mvp-development","dir":"","previous_headings":"Development Roadmap","what":"Current Phase: MVP Development","title":"CLAUDE.md for medfit Package","text":"Package skeleton S7 classes implemented Extraction methods (lm/glm, lavaan) Fitting API (GLM engine) Bootstrap infrastructure Comprehensive tests Documentation vignettes","code":""},{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":"future-enhancements","dir":"","previous_headings":"Development Roadmap","what":"Future Enhancements","title":"CLAUDE.md for medfit Package","text":"lmer engine (mixed models) brms engine (Bayesian) Additional extraction methods Performance optimizations Extended documentation","code":""},{"path":[]},{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":"key-assumptions-for-inference","dir":"","previous_headings":"Statistical Assumptions","what":"Key Assumptions for Inference","title":"CLAUDE.md for medfit Package","text":"Mediator model correctly specified Outcome model correctly specified Appropriate family/link functions (θ̂) ~ N(θ, Σ) Generally holds large n (CLT) Check Q-Q plots Standard causal mediation assumptions testable, requires subject-matter knowledge Note: medfit computes statistics; causal interpretation user’s responsibility","code":""},{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":"diagnostics","dir":"","previous_headings":"Statistical Assumptions","what":"Diagnostics","title":"CLAUDE.md for medfit Package","text":"Users : - Check bootstrap distributions (histograms, Q-Q plots) - Verify model convergence - Assess residual plots - Consider sensitivity analyses","code":""},{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":"common-pitfalls-to-avoid","dir":"","previous_headings":"","what":"Common Pitfalls to Avoid","title":"CLAUDE.md for medfit Package","text":"Don’t mix variable names: Ensure treatment/mediator names match model Don’t ignore convergence warnings: Check converged property Don’t use plugin inference: Always bootstrap CIs Don’t skip input validation: Use validators rigorously Don’t break backward compatibility: Coordinate dependent packages FIRST: Research issue understand root cause : Fix underlying problem properly NEVER: Use suppressMessages(), suppressWarnings(), tryCatch() hide issues without understanding Example: “Overwriting method” S7 message initially suppressed, real fix proper .onLoad() registration order","code":""},{"path":[]},{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":"indirect-effect","dir":"","previous_headings":"Key Mathematical Formulas","what":"Indirect Effect","title":"CLAUDE.md for medfit Package","text":"simple mediation (X → M → Y): : - = effect X M - b = effect M Y (controlling X)","code":"Indirect effect = a × b"},{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":"parametric-bootstrap","dir":"","previous_headings":"Key Mathematical Formulas","what":"Parametric Bootstrap","title":"CLAUDE.md for medfit Package","text":"Sample : Compute statistic θ*, extract quantiles CI.","code":"θ* ~ N(θ̂, Σ̂)"},{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":"nonparametric-bootstrap","dir":"","previous_headings":"Key Mathematical Formulas","what":"Nonparametric Bootstrap","title":"CLAUDE.md for medfit Package","text":"Resample data: D* ~ D (replacement) Refit models D* Extract θ* Compute statistic Repeat, extract quantiles CI","code":""},{"path":[]},{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":"package-ecosystem-documentation","dir":"","previous_headings":"Additional Resources","what":"Package Ecosystem Documentation","title":"CLAUDE.md for medfit Package","text":"probmed: probmed/CLAUDE.md, probmed/planning/ RMediation: rmediation/CLAUDE.md medrobust: medrobust/CLAUDE.md Ecosystem strategy: probmed/planning/three-package-ecosystem-strategy.md","code":""},{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":"key-planning-documents","dir":"","previous_headings":"Additional Resources","what":"Key Planning Documents","title":"CLAUDE.md for medfit Package","text":"Located planning/: - medfit-roadmap.md: Detailed implementation plan - ECOSYSTEM.md: Connection dependent packages","code":""},{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":"related-packages","dir":"","previous_headings":"Additional Resources","what":"Related Packages","title":"CLAUDE.md for medfit Package","text":"probmed: https://github.com/data-wise/probmed RMediation: https://github.com/data-wise/rmediation medrobust: https://github.com/data-wise/medrobust","code":""},{"path":[]},{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":"lavaan-dispatch-issues","dir":"","previous_headings":"Troubleshooting","what":"lavaan Dispatch Issues","title":"CLAUDE.md for medfit Package","text":"extract_mediation() doesn’t work lavaan objects: - Check lavaan installed - Verify .onLoad() registering method - Test methods(extract_mediation) see registered methods","code":""},{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":"bootstrap-reproducibility","dir":"","previous_headings":"Troubleshooting","what":"Bootstrap Reproducibility","title":"CLAUDE.md for medfit Package","text":"bootstrap results reproducible: - Ensure seed set calling - Check parallel=FALSE seed set parallel call - Verify n_boot ","code":""},{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":"performance-issues","dir":"","previous_headings":"Troubleshooting","what":"Performance Issues","title":"CLAUDE.md for medfit Package","text":"bootstrap slow: - Use parallel=TRUE - Consider parametric instead nonparametric - Reduce n_boot testing (use 1000+ production)","code":""},{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":"r-file-loading-order-issues","dir":"","previous_headings":"Troubleshooting","what":"R File Loading Order Issues","title":"CLAUDE.md for medfit Package","text":"get “object found” errors package load: - S7 generics MUST defined methods use - R files load alphabetically, use prefixes: aaa-imports.R, aab-generics.R - Methods extract-*.R require generics aab-generics.R load first","code":""},{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":"lavaan-extraction-issues","dir":"","previous_headings":"Troubleshooting","what":"lavaan Extraction Issues","title":"CLAUDE.md for medfit Package","text":"lavaan extraction fails dimension errors: - Parameter label conflicts: lavaan model uses labels like M ~ *X, parameter already named “” - Don’t add duplicate aliases conflict existing parameter names - Check names(lavaan::coef(fit)) see existing names - Data type issues: lavaan::lavInspect(object, \"data\") may return matrix numeric, data.frame - Convert data.frame return NULL convertible","code":""},{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":"s7-class-has-not-been-registered-with-s4-error","dir":"","previous_headings":"Troubleshooting","what":"S7 “Class has not been registered with S4” Error","title":"CLAUDE.md for medfit Package","text":"see error package installation: 1. Ensure S7::S4_register(ClassName) called .onLoad() S7 class 2. Call S4_register() methods_register() 3. Import full methods package: @import methods","code":""},{"path":"https://data-wise.github.io/medfit/CLAUDE.html","id":"s7-overwriting-method-messages","dir":"","previous_headings":"Troubleshooting","what":"S7 “Overwriting method” Messages","title":"CLAUDE.md for medfit Package","text":"devtools::load_all(), may see “Overwriting method” messages: - known development-time issue (GitHub #474) - affect installed packages - Caused methods registered twice: sourcing .onLoad() - suppress suppressMessages() - behavior correct Last Updated: 2025-12-03 Maintained : medfit development team Workflow Keywords: - doc - Update planning documentation, README, NEWS - check - Run R CMD check –-cran, build/preview website, check GitHub Actions status - sync - Commit push changes remote","code":""},{"path":"https://data-wise.github.io/medfit/START-HERE.html","id":null,"dir":"","previous_headings":"","what":"START HERE: medfit Package","title":"START HERE: medfit Package","text":"Created: 2025-12-02 Status: Package skeleton ready, implementation starting","code":""},{"path":"https://data-wise.github.io/medfit/START-HERE.html","id":"id_-what-is-medfit","dir":"","previous_headings":"","what":"🎯 What is medfit?","title":"START HERE: medfit Package","text":"medfit foundation package mediation analysis ecosystem. provides shared infrastructure (S7 classes, model fitting, extraction, bootstrap) eliminates redundancy across three packages: probmed - P_med (probabilistic effect size) RMediation - Confidence intervals (DOP, MBCO) medrobust - Sensitivity analysis","code":""},{"path":"https://data-wise.github.io/medfit/START-HERE.html","id":"id_-package-location","dir":"","previous_headings":"","what":"📁 Package Location","title":"START HERE: medfit Package","text":"","code":"packages/ ├── medfit/           ← YOU ARE HERE (new foundation package) ├── probmed/          ← Will use medfit (phase 2 complete) ├── rmediation/       ← Will use medfit (RMediation on CRAN) └── medrobust/        ← May use medfit (in development)"},{"path":[]},{"path":"https://data-wise.github.io/medfit/START-HERE.html","id":"in-this-package-medfit","dir":"","previous_headings":"📋 Key Documents","what":"In This Package (medfit/)","title":"START HERE: medfit Package","text":"CLAUDE.md ⭐ Start AI assistance Package architecture Coding standards Ecosystem context README.md - Package overview quick start planning/medfit-roadmap.md - Implementation plan (7 phases, 4-6 weeks) planning/ECOSYSTEM.md - Connections packages","code":""},{"path":"https://data-wise.github.io/medfit/START-HERE.html","id":"in-parent-ecosystem-probmedplanning","dir":"","previous_headings":"📋 Key Documents","what":"In Parent Ecosystem (probmed/planning/)","title":"START HERE: medfit Package","text":"DECISIONS.md - key decisions including: medfit name choice Package ecosystem strategy Model engine decisions ROADMAP.md - Overall ecosystem status timeline three-package-ecosystem-strategy.md - Detailed strategic analysis","code":""},{"path":"https://data-wise.github.io/medfit/START-HERE.html","id":"id_-implementation-roadmap-summary","dir":"","previous_headings":"","what":"🚀 Implementation Roadmap (Summary)","title":"START HERE: medfit Package","text":"Total: 4-6 weeks MVP","code":""},{"path":[]},{"path":"https://data-wise.github.io/medfit/START-HERE.html","id":"id_-package-skeleton","dir":"","previous_headings":"🔧 What’s Already Set Up","what":"✅ Package Skeleton","title":"START HERE: medfit Package","text":"DESCRIPTION dependencies LICENSE (GPL-3) README.md overview CLAUDE.md full documentation NEWS.md changelog .Rbuildignore, .gitignore","code":""},{"path":"https://data-wise.github.io/medfit/START-HERE.html","id":"id_-directory-structure","dir":"","previous_headings":"🔧 What’s Already Set Up","what":"✅ Directory Structure","title":"START HERE: medfit Package","text":"","code":"medfit/ ├── CLAUDE.md              ← AI assistance guide ├── DESCRIPTION            ← Package metadata ├── LICENSE                ← GPL-3 ├── README.md              ← User guide ├── NEWS.md                ← Changelog ├── NAMESPACE              ← Auto-generated ├── R/                     ← Source code │   ├── aaa-imports.R          (imports setup) │   ├── medfit-package.R       (package docs) │   ├── classes.R              (placeholder) │   ├── generics.R             (placeholder) │   ├── utils.R                (placeholder) │   └── zzz.R                  (placeholder) ├── tests/ │   └── testthat/          ← Test files go here ├── man/                   ← Auto-generated docs ├── vignettes/             ← User guides ├── planning/              ← Implementation plans │   ├── medfit-roadmap.md      (7-phase plan) │   ├── ECOSYSTEM.md           (connections) │   └── README.md              (planning guide) └── .github/workflows/     ← CI/CD (to be added)"},{"path":"https://data-wise.github.io/medfit/START-HERE.html","id":"id_-planning-documents","dir":"","previous_headings":"🔧 What’s Already Set Up","what":"✅ Planning Documents","title":"START HERE: medfit Package","text":"Detailed roadmap (7 phases) Ecosystem connections documented Links parent ecosystem decisions","code":""},{"path":[]},{"path":"https://data-wise.github.io/medfit/START-HERE.html","id":"immediate-starting-now","dir":"","previous_headings":"🎬 Next Steps","what":"Immediate (Starting Now)","title":"START HERE: medfit Package","text":"Read planning/medfit-roadmap.md Read planning/ECOSYSTEM.md Check ../probmed/planning/DECISIONS.md Initialize: git init Add remote: git remote add origin https://github.com/data-wise/medfit.git Initial commit Push GitHub Implement MediationData class R/classes.R Implement BootstrapResult class R/classes.R Add print/summary methods Write tests","code":""},{"path":"https://data-wise.github.io/medfit/START-HERE.html","id":"this-week-phase-1-2","dir":"","previous_headings":"🎬 Next Steps","what":"This Week (Phase 1-2)","title":"START HERE: medfit Package","text":"Git repository set GitHub Actions CI/CD configured S7 classes implemented Basic tests passing R CMD check clean","code":""},{"path":"https://data-wise.github.io/medfit/START-HERE.html","id":"next-week-phase-3-4","dir":"","previous_headings":"🎬 Next Steps","what":"Next Week (Phase 3-4)","title":"START HERE: medfit Package","text":"Extraction methods implemented Fitting API implemented Tests comprehensive","code":""},{"path":[]},{"path":"https://data-wise.github.io/medfit/START-HERE.html","id":"probmed-will-import-medfit","dir":"","previous_headings":"🔗 Ecosystem Connections","what":"probmed (Will Import medfit)","title":"START HERE: medfit Package","text":"Location: ../probmed/ Current status: Phase 2 complete (lavaan + mediation integration) change: - Replace probmed::extract_mediation() medfit::extract_mediation() - Replace bootstrap code medfit::bootstrap_mediation() - Keep P_med computation (unique probmed) Migration: Planned Week 6-7 medfit MVP","code":""},{"path":"https://data-wise.github.io/medfit/START-HERE.html","id":"rmediation-will-import-medfit","dir":"","previous_headings":"🔗 Ecosystem Connections","what":"RMediation (Will Import medfit)","title":"START HERE: medfit Package","text":"Location: ../rmediation/ Current status: Stable v1.4.0 CRAN change: - Replace extraction code medfit::extract_mediation() - Optionally use medfit::bootstrap_mediation() - Keep unique methods (DOP, MBCO, MC) Migration: Planned Week 8-9 probmed","code":""},{"path":"https://data-wise.github.io/medfit/START-HERE.html","id":"medrobust-may-suggest-medfit","dir":"","previous_headings":"🔗 Ecosystem Connections","what":"medrobust (May Suggest medfit)","title":"START HERE: medfit Package","text":"Location: ../medrobust/ Current status: v0.1.0.9000 development May change: - Optionally use medfit naive estimates - Optionally use bootstrap utilities Migration: Optional, Week 10","code":""},{"path":"https://data-wise.github.io/medfit/START-HERE.html","id":"id_-key-design-decisions-already-made","dir":"","previous_headings":"","what":"💡 Key Design Decisions (Already Made)","title":"START HERE: medfit Package","text":"../probmed/planning/DECISIONS.md: Package name: medfit ✅ Three-package ecosystem: Foundation + 3 dependents ✅ S7 everywhere: Type-safe OOP ✅ R >= 4.1.0: Native pipe support ✅ GLM first: Incremental engine support ✅ >90% test coverage: Quality standard ✅","code":""},{"path":[]},{"path":"https://data-wise.github.io/medfit/START-HERE.html","id":"documentation","dir":"","previous_headings":"📞 Getting Help","what":"Documentation","title":"START HERE: medfit Package","text":"package: Read CLAUDE.md Ecosystem: Read ../probmed/planning/DECISIONS.md Implementation: Read planning/medfit-roadmap.md","code":""},{"path":"https://data-wise.github.io/medfit/START-HERE.html","id":"questions","dir":"","previous_headings":"📞 Getting Help","what":"Questions?","title":"START HERE: medfit Package","text":"Strategic: Review ../probmed/planning/three-package-ecosystem-strategy.md Technical: Review planning/medfit-roadmap.md Connections: Review planning/ECOSYSTEM.md","code":""},{"path":"https://data-wise.github.io/medfit/START-HERE.html","id":"id_-checklist-for-new-session","dir":"","previous_headings":"","what":"✅ Checklist for New Session","title":"START HERE: medfit Package","text":"starting new session medfit: Read file (START-.md) Check current phase planning/medfit-roadmap.md Review planning/ECOSYSTEM.md package connections Check ../probmed/planning/ROADMAP.md ecosystem status Review recent decisions ../probmed/planning/DECISIONS.md","code":""},{"path":"https://data-wise.github.io/medfit/START-HERE.html","id":"id_-quick-reference","dir":"","previous_headings":"","what":"🎓 Quick Reference","title":"START HERE: medfit Package","text":"Status: 📦 Package skeleton complete, ready Phase 2 (S7 classes) Next session: Start directory (packages/medfit/), review CLAUDE.md, begin S7 class implementation Remember: foundation package - focus clean, efficient infrastructure. Effect size computation stays dependent packages. Created: 2025-12-02 Last Updated: 2025-12-02","code":""},{"path":"https://data-wise.github.io/medfit/articles/bootstrap.html","id":"overview","dir":"Articles","previous_headings":"","what":"Overview","title":"Bootstrap Inference","text":"Bootstrap inference provides confidence intervals indirect effects without assuming normality. medfit implements three bootstrap methods: Parametric bootstrap: Sample parameter distribution (fast, assumes normality) Nonparametric bootstrap: Resample data refit models (robust, slower) Plugin estimator: Point estimate (fastest, CI) methods return BootstrapResult object consistent structure.","code":""},{"path":"https://data-wise.github.io/medfit/articles/bootstrap.html","id":"why-bootstrap-for-mediation","dir":"Articles","previous_headings":"","what":"Why Bootstrap for Mediation?","title":"Bootstrap Inference","text":"sampling distribution indirect effects (\\(\\times b\\)) typically: Non-normal: Even b normal, product Skewed: Often right-skewed Complex: closed-form distribution general case Bootstrap methods: - Don’t assume normality - Provide accurate coverage (closer nominal 95%) - Handle complex indirect effects (serial mediation, moderated mediation)","code":""},{"path":"https://data-wise.github.io/medfit/articles/bootstrap.html","id":"parametric-bootstrap","dir":"Articles","previous_headings":"","what":"Parametric Bootstrap","title":"Bootstrap Inference","text":"Samples estimated parameter distribution: Extract parameter estimates: \\(\\hat{\\theta} = (\\hat{}, \\hat{b}, ...)\\) Extract covariance matrix: \\(\\hat{\\Sigma}\\) Sample \\(\\theta^*_i \\sim N(\\hat{\\theta}, \\hat{\\Sigma})\\) Compute indirect effect: \\(IE^*_i = ^*_i \\times b^*_i\\) Compute percentile CI bootstrap distribution Fast: model refitting required Appropriate : Parameters approximately normal (large n) Inappropriate : Small samples, non-normal parameters fast (refitting) Reproducible seed Works extracted models (need original data) Assumes multivariate normality parameters May underestimate uncertainty small samples","code":"# Assume we have extracted mediation structure med <- extract_mediation(model_m, model_y, treatment = \"X\", mediator = \"M\")  # Parametric bootstrap boot_result <- bootstrap_mediation(   med,   method = \"parametric\",   n_boot = 1000,   ci_level = 0.95,   seed = 123 )  print(boot_result) summary(boot_result)"},{"path":"https://data-wise.github.io/medfit/articles/bootstrap.html","id":"how-it-works","dir":"Articles","previous_headings":"","what":"How It Works","title":"Bootstrap Inference","text":"Extract parameter estimates: \\(\\hat{\\theta} = (\\hat{}, \\hat{b}, ...)\\) Extract covariance matrix: \\(\\hat{\\Sigma}\\) Sample \\(\\theta^*_i \\sim N(\\hat{\\theta}, \\hat{\\Sigma})\\) Compute indirect effect: \\(IE^*_i = ^*_i \\times b^*_i\\) Compute percentile CI bootstrap distribution","code":""},{"path":"https://data-wise.github.io/medfit/articles/bootstrap.html","id":"when-to-use","dir":"Articles","previous_headings":"","what":"When to Use","title":"Bootstrap Inference","text":"Fast: model refitting required Appropriate : Parameters approximately normal (large n) Inappropriate : Small samples, non-normal parameters","code":""},{"path":"https://data-wise.github.io/medfit/articles/bootstrap.html","id":"advantages","dir":"Articles","previous_headings":"","what":"Advantages","title":"Bootstrap Inference","text":"fast (refitting) Reproducible seed Works extracted models (need original data)","code":""},{"path":"https://data-wise.github.io/medfit/articles/bootstrap.html","id":"disadvantages","dir":"Articles","previous_headings":"","what":"Disadvantages","title":"Bootstrap Inference","text":"Assumes multivariate normality parameters May underestimate uncertainty small samples","code":""},{"path":"https://data-wise.github.io/medfit/articles/bootstrap.html","id":"nonparametric-bootstrap","dir":"Articles","previous_headings":"","what":"Nonparametric Bootstrap","title":"Bootstrap Inference","text":"Resamples data refits models: Resample data replacement: \\(D^*_i\\) Refit mediator model \\(D^*_i\\) Refit outcome model \\(D^*_i\\) Extract paths: \\(^*_i\\), \\(b^*_i\\) Compute indirect effect: \\(IE^*_i = ^*_i \\times b^*_i\\) Compute percentile CI bootstrap distribution Robust: Makes parametric assumptions Appropriate : Small samples, non-normal data, GLMs Gold standard: widely accepted method distributional assumptions Robust outliers Captures full sampling variability Computationally intensive (refits models B times) Requires original data Can slow complex models Speed parallel processing:","code":"# Nonparametric bootstrap (requires original data) boot_result <- bootstrap_mediation(   med,   method = \"nonparametric\",   n_boot = 1000,   ci_level = 0.95,   seed = 123,   parallel = TRUE, # Use parallel processing   n_cores = 4 )  print(boot_result) # Detect available cores n_cores <- parallel::detectCores() - 1  # Run in parallel boot_result <- bootstrap_mediation(   med,   method = \"nonparametric\",   n_boot = 5000,   parallel = TRUE,   n_cores = n_cores )"},{"path":"https://data-wise.github.io/medfit/articles/bootstrap.html","id":"how-it-works-1","dir":"Articles","previous_headings":"","what":"How It Works","title":"Bootstrap Inference","text":"Resample data replacement: \\(D^*_i\\) Refit mediator model \\(D^*_i\\) Refit outcome model \\(D^*_i\\) Extract paths: \\(^*_i\\), \\(b^*_i\\) Compute indirect effect: \\(IE^*_i = ^*_i \\times b^*_i\\) Compute percentile CI bootstrap distribution","code":""},{"path":"https://data-wise.github.io/medfit/articles/bootstrap.html","id":"when-to-use-1","dir":"Articles","previous_headings":"","what":"When to Use","title":"Bootstrap Inference","text":"Robust: Makes parametric assumptions Appropriate : Small samples, non-normal data, GLMs Gold standard: widely accepted method","code":""},{"path":"https://data-wise.github.io/medfit/articles/bootstrap.html","id":"advantages-1","dir":"Articles","previous_headings":"","what":"Advantages","title":"Bootstrap Inference","text":"distributional assumptions Robust outliers Captures full sampling variability","code":""},{"path":"https://data-wise.github.io/medfit/articles/bootstrap.html","id":"disadvantages-1","dir":"Articles","previous_headings":"","what":"Disadvantages","title":"Bootstrap Inference","text":"Computationally intensive (refits models B times) Requires original data Can slow complex models","code":""},{"path":"https://data-wise.github.io/medfit/articles/bootstrap.html","id":"parallel-processing","dir":"Articles","previous_headings":"","what":"Parallel Processing","title":"Bootstrap Inference","text":"Speed parallel processing:","code":"# Detect available cores n_cores <- parallel::detectCores() - 1  # Run in parallel boot_result <- bootstrap_mediation(   med,   method = \"nonparametric\",   n_boot = 5000,   parallel = TRUE,   n_cores = n_cores )"},{"path":"https://data-wise.github.io/medfit/articles/bootstrap.html","id":"plugin-estimator","dir":"Articles","previous_headings":"","what":"Plugin Estimator","title":"Bootstrap Inference","text":"Point estimate , confidence interval: Quick checks Point estimates simulation studies CI needed Simply computes \\(\\hat{} \\times \\hat{b}\\) fitted model. resampling.","code":"# Plugin estimator (fastest) plugin_result <- bootstrap_mediation(   med,   method = \"plugin\",   n_boot = 0 # Not used for plugin )  print(plugin_result)"},{"path":"https://data-wise.github.io/medfit/articles/bootstrap.html","id":"when-to-use-2","dir":"Articles","previous_headings":"","what":"When to Use","title":"Bootstrap Inference","text":"Quick checks Point estimates simulation studies CI needed","code":""},{"path":"https://data-wise.github.io/medfit/articles/bootstrap.html","id":"how-it-works-2","dir":"Articles","previous_headings":"","what":"How It Works","title":"Bootstrap Inference","text":"Simply computes \\(\\hat{} \\times \\hat{b}\\) fitted model. resampling.","code":""},{"path":"https://data-wise.github.io/medfit/articles/bootstrap.html","id":"interpreting-results","dir":"Articles","previous_headings":"","what":"Interpreting Results","title":"Bootstrap Inference","text":"bootstrap distribution shows sampling variability: percentile bootstrap CI computed : Lower bound: 2.5th percentile (95% CI) Upper bound: 97.5th percentile (95% CI) confidence interval excludes zero, indirect effect statistically significant:","code":"# Access bootstrap estimates boot_estimates <- boot_result@boot_estimates  # Histogram hist(   boot_estimates,   breaks = 50,   main = \"Bootstrap Distribution of Indirect Effect\",   xlab = \"Indirect Effect (a * b)\" )  # Add percentile CI abline(v = boot_result@ci_lower, col = \"red\", lwd = 2) abline(v = boot_result@ci_upper, col = \"red\", lwd = 2) abline(v = boot_result@estimate, col = \"blue\", lwd = 2)  # Check for normality qqnorm(boot_estimates) qqline(boot_estimates) # 95% CI c(boot_result@ci_lower, boot_result@ci_upper)  # Change confidence level boot_90 <- bootstrap_mediation(   med,   method = \"parametric\",   n_boot = 1000,   ci_level = 0.90 ) c(boot_90@ci_lower, boot_90@ci_upper) # Narrower # Check if CI excludes zero if (boot_result@ci_lower > 0 || boot_result@ci_upper < 0) {   print(\"Indirect effect is statistically significant\") } else {   print(\"Indirect effect is not statistically significant\") }"},{"path":"https://data-wise.github.io/medfit/articles/bootstrap.html","id":"bootstrap-distribution","dir":"Articles","previous_headings":"","what":"Bootstrap Distribution","title":"Bootstrap Inference","text":"bootstrap distribution shows sampling variability:","code":"# Access bootstrap estimates boot_estimates <- boot_result@boot_estimates  # Histogram hist(   boot_estimates,   breaks = 50,   main = \"Bootstrap Distribution of Indirect Effect\",   xlab = \"Indirect Effect (a * b)\" )  # Add percentile CI abline(v = boot_result@ci_lower, col = \"red\", lwd = 2) abline(v = boot_result@ci_upper, col = \"red\", lwd = 2) abline(v = boot_result@estimate, col = \"blue\", lwd = 2)  # Check for normality qqnorm(boot_estimates) qqline(boot_estimates)"},{"path":"https://data-wise.github.io/medfit/articles/bootstrap.html","id":"confidence-interval","dir":"Articles","previous_headings":"","what":"Confidence Interval","title":"Bootstrap Inference","text":"percentile bootstrap CI computed : Lower bound: 2.5th percentile (95% CI) Upper bound: 97.5th percentile (95% CI)","code":"# 95% CI c(boot_result@ci_lower, boot_result@ci_upper)  # Change confidence level boot_90 <- bootstrap_mediation(   med,   method = \"parametric\",   n_boot = 1000,   ci_level = 0.90 ) c(boot_90@ci_lower, boot_90@ci_upper) # Narrower"},{"path":"https://data-wise.github.io/medfit/articles/bootstrap.html","id":"statistical-significance","dir":"Articles","previous_headings":"","what":"Statistical Significance","title":"Bootstrap Inference","text":"confidence interval excludes zero, indirect effect statistically significant:","code":"# Check if CI excludes zero if (boot_result@ci_lower > 0 || boot_result@ci_upper < 0) {   print(\"Indirect effect is statistically significant\") } else {   print(\"Indirect effect is not statistically significant\") }"},{"path":"https://data-wise.github.io/medfit/articles/bootstrap.html","id":"serial-mediation-bootstrap","dir":"Articles","previous_headings":"","what":"Serial Mediation Bootstrap","title":"Bootstrap Inference","text":"Works serial mediation:","code":"# Serial mediation (X -> M1 -> M2 -> Y) serial_med <- extract_mediation(   fit_serial,   treatment = \"X\",   mediators = c(\"M1\", \"M2\"),   outcome = \"Y\" )  # Bootstrap the serial indirect effect (a * d * b) boot_serial <- bootstrap_mediation(   serial_med,   method = \"parametric\",   n_boot = 1000,   ci_level = 0.95 )  # Serial indirect effect print(boot_serial)  # Point estimate serial_med@a_path * serial_med@d_path * serial_med@b_path"},{"path":"https://data-wise.github.io/medfit/articles/bootstrap.html","id":"reproducibility","dir":"Articles","previous_headings":"","what":"Reproducibility","title":"Bootstrap Inference","text":"Set seed reproducible results:","code":"# Same seed = same results boot1 <- bootstrap_mediation(   med,   method = \"parametric\",   n_boot = 1000,   seed = 123 ) boot2 <- bootstrap_mediation(   med,   method = \"parametric\",   n_boot = 1000,   seed = 123 )  # Identical results all.equal(boot1@boot_estimates, boot2@boot_estimates) # TRUE  # Different seed = different results boot3 <- bootstrap_mediation(   med,   method = \"parametric\",   n_boot = 1000,   seed = 456 ) all.equal(boot1@boot_estimates, boot3@boot_estimates) # FALSE"},{"path":"https://data-wise.github.io/medfit/articles/bootstrap.html","id":"how-many-bootstrap-samples","dir":"Articles","previous_headings":"","what":"How Many Bootstrap Samples?","title":"Bootstrap Inference","text":"General guidelines: Exploratory: 1000 samples (fast) Publication: 5000+ samples (stable CI) High stakes: 10,000+ samples (stable) Check stability varying n_boot: CIs similar, n_boot sufficient.","code":"# Compare different n_boot boot_1k <- bootstrap_mediation(   med,   method = \"parametric\",   n_boot = 1000,   seed = 123 ) boot_5k <- bootstrap_mediation(   med,   method = \"parametric\",   n_boot = 5000,   seed = 123 ) boot_10k <- bootstrap_mediation(   med,   method = \"parametric\",   n_boot = 10000,   seed = 123 )  # Compare CIs rbind(   \"1K\" = c(boot_1k@ci_lower, boot_1k@ci_upper),   \"5K\" = c(boot_5k@ci_lower, boot_5k@ci_upper),   \"10K\" = c(boot_10k@ci_lower, boot_10k@ci_upper) )"},{"path":"https://data-wise.github.io/medfit/articles/bootstrap.html","id":"alternative-ci-methods","dir":"Articles","previous_headings":"","what":"Alternative CI Methods","title":"Bootstrap Inference","text":"medfit currently uses percentile bootstrap (simplest, common). Future versions may add: BCa (bias-corrected accelerated): Adjusts bias skewness Studentized bootstrap: Better coverage cases Bayesian bootstrap: Posterior intervals","code":""},{"path":"https://data-wise.github.io/medfit/articles/bootstrap.html","id":"comparison-with-delta-method","dir":"Articles","previous_headings":"","what":"Comparison with Delta Method","title":"Bootstrap Inference","text":"delta method provides asymptotic SE indirect effects: Bootstrap generally preferred : - Doesn’t assume normality indirect effect - Handles skewness correctly - Provides better coverage","code":"# Delta method SE a <- med@a_path b <- med@b_path var_a <- vcov(model_m)[\"X\", \"X\"] var_b <- vcov(model_y)[\"M\", \"M\"] cov_ab <- 0 # Assumed independent  se_delta <- sqrt(b^2 * var_a + a^2 * var_b)  # Delta method 95% CI (assumes normality) ci_delta <- med@a_path * med@b_path + c(-1.96, 1.96) * se_delta  # Compare with bootstrap ci_boot <- c(boot_result@ci_lower, boot_result@ci_upper)  rbind(delta = ci_delta, bootstrap = ci_boot)"},{"path":"https://data-wise.github.io/medfit/articles/bootstrap.html","id":"best-practices","dir":"Articles","previous_headings":"","what":"Best Practices","title":"Bootstrap Inference","text":"Choose method appropriately: Parametric: Large samples, normal data Nonparametric: Small samples, non-normal data, GLMs Plugin: Quick checks Set seed: Always set seed reproducibility Use enough bootstraps: least 1000, preferably 5000+ Check convergence: Ensure models converged bootstrap samples Visualize distribution: Plot histogram Q-Q plot Use parallel processing: nonparametric large B","code":""},{"path":"https://data-wise.github.io/medfit/articles/bootstrap.html","id":"next-steps","dir":"Articles","previous_headings":"","what":"Next Steps","title":"Bootstrap Inference","text":"See introduction S7 class details Learn model extraction Check reference documentation bootstrap_mediation()","code":""},{"path":"https://data-wise.github.io/medfit/articles/bootstrap.html","id":"development-status","dir":"Articles","previous_headings":"","what":"Development Status","title":"Bootstrap Inference","text":"Currently implemented: - ✅ S7 class BootstrapResult - 📋 Parametric bootstrap (planned) - 📋 Nonparametric bootstrap (planned) - 📋 Parallel processing support (planned) See NEWS.md updates.","code":""},{"path":"https://data-wise.github.io/medfit/articles/extraction.html","id":"overview","dir":"Articles","previous_headings":"","what":"Overview","title":"Model Extraction","text":"extract_mediation() function provides standardized interface extracting mediation structures fitted models. works : lm/glm models (base R) - implemented lavaan SEM models - implemented lmer mixed models (future) Note: OpenMx extraction planned future release. extraction methods return MediationData SerialMediationData object, ensuring consistency across modeling frameworks.","code":""},{"path":"https://data-wise.github.io/medfit/articles/extraction.html","id":"extraction-pattern","dir":"Articles","previous_headings":"","what":"Extraction Pattern","title":"Model Extraction","text":"extraction methods follow pattern: Validate inputs (check variable names exist) Extract path coefficients (, b, c’ paths) Extract covariance matrix (inference) Extract residual variances (Gaussian) Retrieve data (available) Create MediationData object Return standardized structure","code":""},{"path":"https://data-wise.github.io/medfit/articles/extraction.html","id":"extracting-from-lmglm-models","dir":"Articles","previous_headings":"","what":"Extracting from lm/glm Models","title":"Model Extraction","text":"simple mediation (X -> M -> Y), fit two models: extraction captures: Path coefficients: a_path: Coefficient X mediator model (X -> M) b_path: Coefficient M outcome model (M -> Y, controlling X) c_prime: Coefficient X outcome model (direct effect) Full parameter vector: coefficients models Covariance matrix: computing standard errors functions parameters Residual variances: sigma_m^2 sigma_y^2 Gaussian models Data metadata: Sample size, variable names, convergence status Works GLM family: Include covariates models:","code":"# Generate example data set.seed(123) n <- 200 X <- rnorm(n) M <- 0.5 * X + rnorm(n, sd = 0.8) Y <- 0.3 * M + 0.2 * X + rnorm(n, sd = 0.8) data <- data.frame(X = X, M = M, Y = Y)  # Fit mediation models model_m <- lm(M ~ X, data = data) model_y <- lm(Y ~ X + M, data = data)  # Extract mediation structure med <- extract_mediation(   model_m,           # Mediator model   model_y,           # Outcome model   treatment = \"X\",   mediator = \"M\" )  # View results print(med) summary(med)  # Indirect effect med@a_path * med@b_path # Binary outcome Y_binary <- rbinom(n, 1, prob = plogis(0.3 * M + 0.2 * X)) data$Y_binary <- Y_binary  model_m <- lm(M ~ X, data = data) model_y <- glm(Y_binary ~ X + M, data = data, family = binomial())  med <- extract_mediation(   model_m,   model_y,   treatment = \"X\",   mediator = \"M\" )  # Note: b_path and c_prime are on logit scale print(med) # Add covariates data$Z1 <- rnorm(n) data$Z2 <- rnorm(n)  model_m <- lm(M ~ X + Z1 + Z2, data = data) model_y <- lm(Y ~ X + M + Z1 + Z2, data = data)  med <- extract_mediation(   model_m,   model_y,   treatment = \"X\",   mediator = \"M\" )  # Path coefficients adjust for Z1 and Z2 print(med)"},{"path":"https://data-wise.github.io/medfit/articles/extraction.html","id":"simple-mediation","dir":"Articles","previous_headings":"","what":"Simple Mediation","title":"Model Extraction","text":"simple mediation (X -> M -> Y), fit two models:","code":"# Generate example data set.seed(123) n <- 200 X <- rnorm(n) M <- 0.5 * X + rnorm(n, sd = 0.8) Y <- 0.3 * M + 0.2 * X + rnorm(n, sd = 0.8) data <- data.frame(X = X, M = M, Y = Y)  # Fit mediation models model_m <- lm(M ~ X, data = data) model_y <- lm(Y ~ X + M, data = data)  # Extract mediation structure med <- extract_mediation(   model_m,           # Mediator model   model_y,           # Outcome model   treatment = \"X\",   mediator = \"M\" )  # View results print(med) summary(med)  # Indirect effect med@a_path * med@b_path"},{"path":"https://data-wise.github.io/medfit/articles/extraction.html","id":"what-gets-extracted","dir":"Articles","previous_headings":"","what":"What Gets Extracted?","title":"Model Extraction","text":"extraction captures: Path coefficients: a_path: Coefficient X mediator model (X -> M) b_path: Coefficient M outcome model (M -> Y, controlling X) c_prime: Coefficient X outcome model (direct effect) Full parameter vector: coefficients models Covariance matrix: computing standard errors functions parameters Residual variances: sigma_m^2 sigma_y^2 Gaussian models Data metadata: Sample size, variable names, convergence status","code":""},{"path":"https://data-wise.github.io/medfit/articles/extraction.html","id":"glm-with-non-normal-outcomes","dir":"Articles","previous_headings":"","what":"GLM with Non-Normal Outcomes","title":"Model Extraction","text":"Works GLM family:","code":"# Binary outcome Y_binary <- rbinom(n, 1, prob = plogis(0.3 * M + 0.2 * X)) data$Y_binary <- Y_binary  model_m <- lm(M ~ X, data = data) model_y <- glm(Y_binary ~ X + M, data = data, family = binomial())  med <- extract_mediation(   model_m,   model_y,   treatment = \"X\",   mediator = \"M\" )  # Note: b_path and c_prime are on logit scale print(med)"},{"path":"https://data-wise.github.io/medfit/articles/extraction.html","id":"controlling-for-covariates","dir":"Articles","previous_headings":"","what":"Controlling for Covariates","title":"Model Extraction","text":"Include covariates models:","code":"# Add covariates data$Z1 <- rnorm(n) data$Z2 <- rnorm(n)  model_m <- lm(M ~ X + Z1 + Z2, data = data) model_y <- lm(Y ~ X + M + Z1 + Z2, data = data)  med <- extract_mediation(   model_m,   model_y,   treatment = \"X\",   mediator = \"M\" )  # Path coefficients adjust for Z1 and Z2 print(med)"},{"path":"https://data-wise.github.io/medfit/articles/extraction.html","id":"extracting-from-lavaan-models","dir":"Articles","previous_headings":"","what":"Extracting from lavaan Models","title":"Model Extraction","text":"serial mediation (X -> M1 -> M2 -> Y):","code":"library(lavaan)  # Define SEM model model_syntax <- \"   # Mediator model   M ~ a * X    # Outcome model   Y ~ b * M + c_prime * X    # Indirect effect   indirect := a * b    # Total effect   total := c_prime + a * b \"  # Fit model fit <- sem(model_syntax, data = data)  # Extract mediation structure med <- extract_mediation(   fit,   treatment = \"X\",   mediator = \"M\",   outcome = \"Y\" )  print(med) # Generate serial mediation data M1 <- 0.4 * X + rnorm(n, sd = 0.8) M2 <- 0.5 * M1 + 0.2 * X + rnorm(n, sd = 0.8) Y_serial <- 0.3 * M2 + 0.1 * M1 + 0.2 * X + rnorm(n, sd = 0.8) data_serial <- data.frame(X = X, M1 = M1, M2 = M2, Y = Y_serial)  # Define serial mediation model serial_syntax <- \"   # First mediator   M1 ~ a * X    # Second mediator   M2 ~ d * M1 + X    # Outcome   Y ~ b * M2 + M1 + c_prime * X    # Serial indirect effect (product-of-three)   serial_indirect := a * d * b \"  fit_serial <- sem(serial_syntax, data = data_serial)  # Extract as SerialMediationData med_serial <- extract_mediation(   fit_serial,   treatment = \"X\",   mediators = c(\"M1\", \"M2\"),   outcome = \"Y\" )  print(med_serial)  # Serial indirect effect med_serial@a_path * med_serial@d_path * med_serial@b_path"},{"path":"https://data-wise.github.io/medfit/articles/extraction.html","id":"simple-mediation-in-sem","dir":"Articles","previous_headings":"","what":"Simple Mediation in SEM","title":"Model Extraction","text":"","code":"library(lavaan)  # Define SEM model model_syntax <- \"   # Mediator model   M ~ a * X    # Outcome model   Y ~ b * M + c_prime * X    # Indirect effect   indirect := a * b    # Total effect   total := c_prime + a * b \"  # Fit model fit <- sem(model_syntax, data = data)  # Extract mediation structure med <- extract_mediation(   fit,   treatment = \"X\",   mediator = \"M\",   outcome = \"Y\" )  print(med)"},{"path":"https://data-wise.github.io/medfit/articles/extraction.html","id":"serial-mediation-in-sem","dir":"Articles","previous_headings":"","what":"Serial Mediation in SEM","title":"Model Extraction","text":"serial mediation (X -> M1 -> M2 -> Y):","code":"# Generate serial mediation data M1 <- 0.4 * X + rnorm(n, sd = 0.8) M2 <- 0.5 * M1 + 0.2 * X + rnorm(n, sd = 0.8) Y_serial <- 0.3 * M2 + 0.1 * M1 + 0.2 * X + rnorm(n, sd = 0.8) data_serial <- data.frame(X = X, M1 = M1, M2 = M2, Y = Y_serial)  # Define serial mediation model serial_syntax <- \"   # First mediator   M1 ~ a * X    # Second mediator   M2 ~ d * M1 + X    # Outcome   Y ~ b * M2 + M1 + c_prime * X    # Serial indirect effect (product-of-three)   serial_indirect := a * d * b \"  fit_serial <- sem(serial_syntax, data = data_serial)  # Extract as SerialMediationData med_serial <- extract_mediation(   fit_serial,   treatment = \"X\",   mediators = c(\"M1\", \"M2\"),   outcome = \"Y\" )  print(med_serial)  # Serial indirect effect med_serial@a_path * med_serial@d_path * med_serial@b_path"},{"path":"https://data-wise.github.io/medfit/articles/extraction.html","id":"compatibility-with-rmediation","dir":"Articles","previous_headings":"","what":"Compatibility with RMediation","title":"Model Extraction","text":"extraction design compatible RMediation’s lavaan extractor:","code":"# RMediation extracts parameters for Distribution of Product method # medfit extracts the same structure but as S7 classes  # Both packages can work with the same fitted models # medfit provides infrastructure, RMediation adds DOP/MBCO methods"},{"path":"https://data-wise.github.io/medfit/articles/extraction.html","id":"error-handling","dir":"Articles","previous_headings":"","what":"Error Handling","title":"Model Extraction","text":"extraction uses checkmate fail-fast input validation informative error messages: defensive programming approach catches errors early clear messages, making debugging easier.","code":"# Variable not in model extract_mediation(   model_m,   model_y,   treatment = \"NonExistent\",   mediator = \"M\" ) # Error: Assertion on 'treatment in mediator model' failed: #        Must be element of set {'(Intercept)','X'}, but is 'NonExistent'.  # Wrong type for treatment argument extract_mediation(   model_m,   model_y,   treatment = 123,  # Should be character   mediator = \"M\" ) # Error: Assertion on 'treatment' failed: Must be of type 'string', not 'double'.  # Mediator not in outcome model model_y_wrong <- lm(Y ~ X, data = data)  # Missing M extract_mediation(   model_m,   model_y_wrong,   treatment = \"X\",   mediator = \"M\" ) # Error: Assertion on 'mediator in outcome model' failed: #        Must be element of set {'(Intercept)','X'}, but is 'M'."},{"path":"https://data-wise.github.io/medfit/articles/extraction.html","id":"advanced-topics","dir":"Articles","previous_headings":"","what":"Advanced Topics","title":"Model Extraction","text":"estimates property contains parameters models: Use covariance matrix computing standard errors:","code":"med <- extract_mediation(model_m, model_y, treatment = \"X\", mediator = \"M\")  # All parameters (intercepts + coefficients) med@estimates  # Access by name med@estimates[\"a\"]  # a_path med@estimates[\"b\"]  # b_path # Covariance matrix of all parameters vcov_mat <- med@vcov  # For delta method SE of indirect effect (a*b): # Var(ab) = b^2 * Var(a) + a^2 * Var(b) + 2ab*Cov(a,b)  a <- med@a_path b <- med@b_path var_a <- vcov_mat[\"a\", \"a\"] var_b <- vcov_mat[\"b\", \"b\"] cov_ab <- vcov_mat[\"a\", \"b\"]  var_indirect <- b^2 * var_a + a^2 * var_b + 2 * a * b * cov_ab se_indirect <- sqrt(var_indirect)  se_indirect"},{"path":"https://data-wise.github.io/medfit/articles/extraction.html","id":"extracting-full-parameter-vector","dir":"Articles","previous_headings":"","what":"Extracting Full Parameter Vector","title":"Model Extraction","text":"estimates property contains parameters models:","code":"med <- extract_mediation(model_m, model_y, treatment = \"X\", mediator = \"M\")  # All parameters (intercepts + coefficients) med@estimates  # Access by name med@estimates[\"a\"]  # a_path med@estimates[\"b\"]  # b_path"},{"path":"https://data-wise.github.io/medfit/articles/extraction.html","id":"covariance-matrix-for-delta-method","dir":"Articles","previous_headings":"","what":"Covariance Matrix for Delta Method","title":"Model Extraction","text":"Use covariance matrix computing standard errors:","code":"# Covariance matrix of all parameters vcov_mat <- med@vcov  # For delta method SE of indirect effect (a*b): # Var(ab) = b^2 * Var(a) + a^2 * Var(b) + 2ab*Cov(a,b)  a <- med@a_path b <- med@b_path var_a <- vcov_mat[\"a\", \"a\"] var_b <- vcov_mat[\"b\", \"b\"] cov_ab <- vcov_mat[\"a\", \"b\"]  var_indirect <- b^2 * var_a + a^2 * var_b + 2 * a * b * cov_ab se_indirect <- sqrt(var_indirect)  se_indirect"},{"path":"https://data-wise.github.io/medfit/articles/extraction.html","id":"design-for-extensibility","dir":"Articles","previous_headings":"","what":"Design for Extensibility","title":"Model Extraction","text":"extraction system designed accommodate future extensions: New model types: Add methods lmer, brms, etc. Complex mediation: Multiple mediators, moderated mediation Multiple treatments: Comparative mediation analysis Latent variables: SEM measurement models methods return S7 class structure, ensuring consistency.","code":""},{"path":"https://data-wise.github.io/medfit/articles/extraction.html","id":"next-steps","dir":"Articles","previous_headings":"","what":"Next Steps","title":"Model Extraction","text":"Learn bootstrap inference extracted models See introduction S7 class details Check reference documentation extract_mediation() methods","code":""},{"path":"https://data-wise.github.io/medfit/articles/extraction.html","id":"development-status","dir":"Articles","previous_headings":"","what":"Development Status","title":"Model Extraction","text":"Phase 3 (Model Extraction) complete: ✅ S7 class definitions (MediationData, SerialMediationData) ✅ lm/glm extraction checkmate validation ✅ lavaan extraction checkmate validation 📋 lmer extraction (future) Note: OpenMx extraction postponed future release. See NEWS.md updates.","code":""},{"path":"https://data-wise.github.io/medfit/articles/getting-started.html","id":"what-is-medfit","dir":"Articles","previous_headings":"","what":"What is medfit?","title":"Getting Started with medfit","text":"medfit provides unified infrastructure mediation analysis R. offers: S7-based classes standardized mediation data structures Generic functions model fitting, extraction, inference Foundation specialized mediation packages (probmed, RMediation, medrobust)","code":""},{"path":"https://data-wise.github.io/medfit/articles/getting-started.html","id":"quick-start","dir":"Articles","previous_headings":"","what":"Quick Start","title":"Getting Started with medfit","text":"serial mediation (X -> M1 -> M2 -> Y):","code":"# Simple mediation: X -> M -> Y med_data <- MediationData(   a_path = 0.5,           # X -> M effect   b_path = 0.3,           # M -> Y effect (controlling for X)   c_prime = 0.2,          # X -> Y direct effect   treatment = \"X\",   mediator = \"M\",   outcome = \"Y\",   estimates = c(a = 0.5, b = 0.3, c_prime = 0.2),   vcov = diag(3) * 0.01,  # Covariance matrix   n_obs = 100L,   converged = TRUE,   source_package = \"medfit\" )  # View the object print(med_data) # Indirect effect = a * b med_data@a_path * med_data@b_path serial_data <- SerialMediationData(   a_path = 0.4,           # X -> M1   d_path = 0.5,           # M1 -> M2   b_path = 0.3,           # M2 -> Y   c_prime = 0.2,          # X -> Y direct effect   treatment = \"X\",   mediators = c(\"M1\", \"M2\"),   outcome = \"Y\",   estimates = c(a = 0.4, d = 0.5, b = 0.3, c_prime = 0.2),   vcov = diag(4) * 0.01,   mediator_predictors = list(M1 = \"X\", M2 = c(\"X\", \"M1\")),   outcome_predictors = c(\"X\", \"M1\", \"M2\"),   n_obs = 100L,   converged = TRUE,   source_package = \"medfit\" )  # Serial indirect effect = a * d * b serial_data@a_path * serial_data@d_path * serial_data@b_path"},{"path":"https://data-wise.github.io/medfit/articles/getting-started.html","id":"create-a-mediation-data-object","dir":"Articles","previous_headings":"","what":"Create a Mediation Data Object","title":"Getting Started with medfit","text":"","code":"# Simple mediation: X -> M -> Y med_data <- MediationData(   a_path = 0.5,           # X -> M effect   b_path = 0.3,           # M -> Y effect (controlling for X)   c_prime = 0.2,          # X -> Y direct effect   treatment = \"X\",   mediator = \"M\",   outcome = \"Y\",   estimates = c(a = 0.5, b = 0.3, c_prime = 0.2),   vcov = diag(3) * 0.01,  # Covariance matrix   n_obs = 100L,   converged = TRUE,   source_package = \"medfit\" )  # View the object print(med_data)"},{"path":"https://data-wise.github.io/medfit/articles/getting-started.html","id":"compute-indirect-effect","dir":"Articles","previous_headings":"","what":"Compute Indirect Effect","title":"Getting Started with medfit","text":"","code":"# Indirect effect = a * b med_data@a_path * med_data@b_path"},{"path":"https://data-wise.github.io/medfit/articles/getting-started.html","id":"serial-mediation","dir":"Articles","previous_headings":"","what":"Serial Mediation","title":"Getting Started with medfit","text":"serial mediation (X -> M1 -> M2 -> Y):","code":"serial_data <- SerialMediationData(   a_path = 0.4,           # X -> M1   d_path = 0.5,           # M1 -> M2   b_path = 0.3,           # M2 -> Y   c_prime = 0.2,          # X -> Y direct effect   treatment = \"X\",   mediators = c(\"M1\", \"M2\"),   outcome = \"Y\",   estimates = c(a = 0.4, d = 0.5, b = 0.3, c_prime = 0.2),   vcov = diag(4) * 0.01,   mediator_predictors = list(M1 = \"X\", M2 = c(\"X\", \"M1\")),   outcome_predictors = c(\"X\", \"M1\", \"M2\"),   n_obs = 100L,   converged = TRUE,   source_package = \"medfit\" )  # Serial indirect effect = a * d * b serial_data@a_path * serial_data@d_path * serial_data@b_path"},{"path":"https://data-wise.github.io/medfit/articles/getting-started.html","id":"main-functions","dir":"Articles","previous_headings":"","what":"Main Functions","title":"Getting Started with medfit","text":"medfit provides three generic functions: extract_mediation() - Extract mediation structure fitted models (lm/glm, lavaan) fit_mediation() - Fit mediation models directly bootstrap_mediation() - Bootstrap inference confidence intervals","code":""},{"path":"https://data-wise.github.io/medfit/articles/getting-started.html","id":"learn-more","dir":"Articles","previous_headings":"","what":"Learn More","title":"Getting Started with medfit","text":"Introduction medfit - Detailed S7 class documentation Model Extraction - Extract lm, glm, lavaan models Bootstrap Inference - Parametric nonparametric bootstrap","code":""},{"path":"https://data-wise.github.io/medfit/articles/getting-started.html","id":"development-status","dir":"Articles","previous_headings":"","what":"Development Status","title":"Getting Started with medfit","text":"medfit active development: ✅ Phase 2 Complete: S7 class architecture ✅ Phase 3 Complete: Model extraction (lm/glm, lavaan) 🚧 Phase 4 Progress: Model fitting 📋 Planned: Bootstrap infrastructure See NEWS.md latest updates.","code":""},{"path":"https://data-wise.github.io/medfit/articles/introduction.html","id":"overview","dir":"Articles","previous_headings":"","what":"Overview","title":"Introduction to medfit","text":"medfit provides unified infrastructure mediation analysis R. offers: S7-based classes standardized mediation data structures Generic functions model fitting, extraction, inference Foundation mediation analysis ecosystem (probmed, RMediation, medrobust) package eliminates code duplication across mediation packages providing shared infrastructure allowing package focus unique methodological contributions.","code":""},{"path":"https://data-wise.github.io/medfit/articles/introduction.html","id":"core-s7-classes","dir":"Articles","previous_headings":"","what":"Core S7 Classes","title":"Introduction to medfit","text":"medfit defines three main S7 classes represent mediation structures: Stores simple mediation models (X -> M -> Y): indirect effect computed * b: Stores serial mediation models (X -> M1 -> M2 -> … -> Y): two mediators, serial indirect effect * d * b: Design extensibility: 3+ mediators, d_path becomes vector: - 3 mediators: * d21 * d32 * b (product--four) - k mediators: product--(k+1) Stores bootstrap inference results:","code":"# Example: Create a MediationData object med_data <- MediationData(   a_path = 0.5,           # X -> M effect   b_path = 0.3,           # M -> Y effect (controlling for X)   c_prime = 0.2,          # X -> Y direct effect   treatment = \"X\",   mediator = \"M\",   outcome = \"Y\",   estimates = c(a = 0.5, b = 0.3, c_prime = 0.2),   vcov = diag(3) * 0.01,  # Covariance matrix   n_obs = 100L,   converged = TRUE,   source_package = \"medfit\" )  # Print method shows key information print(med_data)  # Summary method provides details summary(med_data) # Access path coefficients med_data@a_path med_data@b_path  # Indirect effect med_data@a_path * med_data@b_path # Example: Two-mediator serial mediation (X -> M1 -> M2 -> Y) serial_data <- SerialMediationData(   a_path = 0.4,           # X -> M1   d_path = 0.5,           # M1 -> M2 (scalar for 2 mediators)   b_path = 0.3,           # M2 -> Y   c_prime = 0.2,          # X -> Y direct effect   treatment = \"X\",   mediators = c(\"M1\", \"M2\"),   outcome = \"Y\",   estimates = c(a = 0.4, d = 0.5, b = 0.3, c_prime = 0.2),   vcov = diag(4) * 0.01,   mediator_predictors = list(M1 = \"X\", M2 = c(\"X\", \"M1\")),   outcome_predictors = c(\"X\", \"M1\", \"M2\"),   n_obs = 100L,   converged = TRUE,   source_package = \"medfit\" )  print(serial_data) # Serial indirect effect (product-of-three) serial_data@a_path * serial_data@d_path * serial_data@b_path # Example: Bootstrap result for indirect effect boot_result <- BootstrapResult(   estimate = 0.15,        # Point estimate (a * b)   ci_lower = 0.08,        # Lower CI bound   ci_upper = 0.25,        # Upper CI bound   ci_level = 0.95,        # Confidence level   boot_estimates = rnorm(1000, mean = 0.15, sd = 0.04),  # Bootstrap distribution   n_boot = 1000L,   method = \"parametric\",   converged = TRUE )  print(boot_result) summary(boot_result)"},{"path":"https://data-wise.github.io/medfit/articles/introduction.html","id":"mediationdata","dir":"Articles","previous_headings":"","what":"MediationData","title":"Introduction to medfit","text":"Stores simple mediation models (X -> M -> Y): indirect effect computed * b:","code":"# Example: Create a MediationData object med_data <- MediationData(   a_path = 0.5,           # X -> M effect   b_path = 0.3,           # M -> Y effect (controlling for X)   c_prime = 0.2,          # X -> Y direct effect   treatment = \"X\",   mediator = \"M\",   outcome = \"Y\",   estimates = c(a = 0.5, b = 0.3, c_prime = 0.2),   vcov = diag(3) * 0.01,  # Covariance matrix   n_obs = 100L,   converged = TRUE,   source_package = \"medfit\" )  # Print method shows key information print(med_data)  # Summary method provides details summary(med_data) # Access path coefficients med_data@a_path med_data@b_path  # Indirect effect med_data@a_path * med_data@b_path"},{"path":"https://data-wise.github.io/medfit/articles/introduction.html","id":"serialmediationdata","dir":"Articles","previous_headings":"","what":"SerialMediationData","title":"Introduction to medfit","text":"Stores serial mediation models (X -> M1 -> M2 -> … -> Y): two mediators, serial indirect effect * d * b: Design extensibility: 3+ mediators, d_path becomes vector: - 3 mediators: * d21 * d32 * b (product--four) - k mediators: product--(k+1)","code":"# Example: Two-mediator serial mediation (X -> M1 -> M2 -> Y) serial_data <- SerialMediationData(   a_path = 0.4,           # X -> M1   d_path = 0.5,           # M1 -> M2 (scalar for 2 mediators)   b_path = 0.3,           # M2 -> Y   c_prime = 0.2,          # X -> Y direct effect   treatment = \"X\",   mediators = c(\"M1\", \"M2\"),   outcome = \"Y\",   estimates = c(a = 0.4, d = 0.5, b = 0.3, c_prime = 0.2),   vcov = diag(4) * 0.01,   mediator_predictors = list(M1 = \"X\", M2 = c(\"X\", \"M1\")),   outcome_predictors = c(\"X\", \"M1\", \"M2\"),   n_obs = 100L,   converged = TRUE,   source_package = \"medfit\" )  print(serial_data) # Serial indirect effect (product-of-three) serial_data@a_path * serial_data@d_path * serial_data@b_path"},{"path":"https://data-wise.github.io/medfit/articles/introduction.html","id":"bootstrapresult","dir":"Articles","previous_headings":"","what":"BootstrapResult","title":"Introduction to medfit","text":"Stores bootstrap inference results:","code":"# Example: Bootstrap result for indirect effect boot_result <- BootstrapResult(   estimate = 0.15,        # Point estimate (a * b)   ci_lower = 0.08,        # Lower CI bound   ci_upper = 0.25,        # Upper CI bound   ci_level = 0.95,        # Confidence level   boot_estimates = rnorm(1000, mean = 0.15, sd = 0.04),  # Bootstrap distribution   n_boot = 1000L,   method = \"parametric\",   converged = TRUE )  print(boot_result) summary(boot_result)"},{"path":"https://data-wise.github.io/medfit/articles/introduction.html","id":"main-functions","dir":"Articles","previous_headings":"","what":"Main Functions","title":"Introduction to medfit","text":"medfit provides three generic functions work across different model types: Extract mediation structure fitted models: See vignette(\"extraction\") details. Fit mediation models directly: Perform bootstrap inference indirect effects: See vignette(\"bootstrap\") details.","code":"# From lm/glm models med <- extract_mediation(   model_m,           # Mediator model (M ~ X)   model_y,           # Outcome model (Y ~ X + M)   treatment = \"X\",   mediator = \"M\" )  # From lavaan SEM models med <- extract_mediation(   lavaan_fit,   treatment = \"X\",   mediator = \"M\",   outcome = \"Y\" ) # Fit using GLM engine med <- fit_mediation(   data = mydata,   treatment = \"X\",   mediator = \"M\",   outcome = \"Y\",   engine = \"glm\",   family_m = gaussian(),   family_y = gaussian() ) # Parametric bootstrap boot_result <- bootstrap_mediation(   med_data,   method = \"parametric\",   n_boot = 1000,   ci_level = 0.95,   parallel = TRUE )  # Nonparametric bootstrap (resamples data, refits models) boot_result <- bootstrap_mediation(   med_data,   method = \"nonparametric\",   n_boot = 1000 )"},{"path":"https://data-wise.github.io/medfit/articles/introduction.html","id":"extract_mediation","dir":"Articles","previous_headings":"","what":"extract_mediation()","title":"Introduction to medfit","text":"Extract mediation structure fitted models: See vignette(\"extraction\") details.","code":"# From lm/glm models med <- extract_mediation(   model_m,           # Mediator model (M ~ X)   model_y,           # Outcome model (Y ~ X + M)   treatment = \"X\",   mediator = \"M\" )  # From lavaan SEM models med <- extract_mediation(   lavaan_fit,   treatment = \"X\",   mediator = \"M\",   outcome = \"Y\" )"},{"path":"https://data-wise.github.io/medfit/articles/introduction.html","id":"fit_mediation","dir":"Articles","previous_headings":"","what":"fit_mediation()","title":"Introduction to medfit","text":"Fit mediation models directly:","code":"# Fit using GLM engine med <- fit_mediation(   data = mydata,   treatment = \"X\",   mediator = \"M\",   outcome = \"Y\",   engine = \"glm\",   family_m = gaussian(),   family_y = gaussian() )"},{"path":"https://data-wise.github.io/medfit/articles/introduction.html","id":"bootstrap_mediation","dir":"Articles","previous_headings":"","what":"bootstrap_mediation()","title":"Introduction to medfit","text":"Perform bootstrap inference indirect effects: See vignette(\"bootstrap\") details.","code":"# Parametric bootstrap boot_result <- bootstrap_mediation(   med_data,   method = \"parametric\",   n_boot = 1000,   ci_level = 0.95,   parallel = TRUE )  # Nonparametric bootstrap (resamples data, refits models) boot_result <- bootstrap_mediation(   med_data,   method = \"nonparametric\",   n_boot = 1000 )"},{"path":"https://data-wise.github.io/medfit/articles/introduction.html","id":"package-ecosystem","dir":"Articles","previous_headings":"","what":"Package Ecosystem","title":"Introduction to medfit","text":"medfit serves foundation specialized mediation packages: Uses medfit infrastructure Adds P_med computation visualization Uses medfit extraction Adds Distribution Product (DOP), MBCO tests Uses medfit baseline estimates Adds bounds computation, falsification tests","code":""},{"path":"https://data-wise.github.io/medfit/articles/introduction.html","id":"design-principles","dir":"Articles","previous_headings":"","what":"Design Principles","title":"Introduction to medfit","text":"Type safety: S7 classes validators ensure data integrity Defensive programming: checkmate assertions fail-fast input validation Consistency: Standardized interfaces across model types Extensibility: Easy add new model engines methods Minimal dependencies: Core functionality minimal external dependencies Infrastructure focus: Provides tools, effect sizes","code":""},{"path":"https://data-wise.github.io/medfit/articles/introduction.html","id":"next-steps","dir":"Articles","previous_headings":"","what":"Next Steps","title":"Introduction to medfit","text":"Learn model extraction different sources Explore bootstrap inference methods See reference documentation detailed API information","code":""},{"path":"https://data-wise.github.io/medfit/articles/introduction.html","id":"development-status","dir":"Articles","previous_headings":"","what":"Development Status","title":"Introduction to medfit","text":"medfit active development. Current status: ✅ Phase 2 Complete: S7 class architecture ✅ Phase 3 Complete: Model extraction (lm/glm, lavaan) 🚧 Phase 4 Progress: Model fitting 📋 Planned: Bootstrap infrastructure See NEWS.md latest updates.","code":""},{"path":"https://data-wise.github.io/medfit/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Davood Tofighi. Author, maintainer.","code":""},{"path":"https://data-wise.github.io/medfit/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Tofighi D (2025). medfit: Infrastructure Mediation Model Fitting Extraction. R package version 0.1.0, https://data-wise.github.io/medfit/.","code":"@Manual{,   title = {medfit: Infrastructure for Mediation Model Fitting and Extraction},   author = {Davood Tofighi},   year = {2025},   note = {R package version 0.1.0},   url = {https://data-wise.github.io/medfit/}, }"},{"path":[]},{"path":"https://data-wise.github.io/medfit/index.html","id":"overview","dir":"","previous_headings":"","what":"Overview","title":"medfit: Infrastructure for Mediation Analysis in R","text":"medfit provides unified S7-based infrastructure fitting mediation models, extracting path coefficients, performing bootstrap inference. serves foundation package mediation analysis ecosystem, supporting probmed, RMediation, medrobust.","code":""},{"path":"https://data-wise.github.io/medfit/index.html","id":"key-features","dir":"","previous_headings":"Overview","what":"Key Features","title":"medfit: Infrastructure for Mediation Analysis in R","text":"Unified Model Extraction: Extract mediation structure various model types (lm, glm, lavaan) Flexible Model Fitting: Fit mediation models using different engines (GLM, future support mixed models Bayesian methods) Robust Bootstrap Inference: Three bootstrap methods (parametric, nonparametric, plugin) parallel processing support Type-Safe S7 Classes: Modern object-oriented design ensuring data integrity Ecosystem Foundation: Shared infrastructure eliminating redundancy across mediation packages","code":""},{"path":"https://data-wise.github.io/medfit/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"medfit: Infrastructure for Mediation Analysis in R","text":"can install development version medfit GitHub: using remotes:","code":"# install.packages(\"pak\") pak::pak(\"data-wise/medfit\") # install.packages(\"remotes\") remotes::install_github(\"data-wise/medfit\")"},{"path":[]},{"path":"https://data-wise.github.io/medfit/index.html","id":"extract-mediation-structure-from-fitted-models","dir":"","previous_headings":"Quick Start","what":"Extract Mediation Structure from Fitted Models","title":"medfit: Infrastructure for Mediation Analysis in R","text":"","code":"library(medfit)  # Simulate data set.seed(123) n <- 200 X <- rnorm(n) M <- 0.5 * X + rnorm(n) Y <- 0.3 * M + 0.2 * X + rnorm(n) data <- data.frame(X = X, M = M, Y = Y)  # Fit models fit_m <- lm(M ~ X, data = data) fit_y <- lm(Y ~ X + M, data = data)  # Extract mediation structure med_data <- extract_mediation(   fit_m,   model_y = fit_y,   treatment = \"X\",   mediator = \"M\" )  print(med_data)"},{"path":"https://data-wise.github.io/medfit/index.html","id":"fit-mediation-models-directly","dir":"","previous_headings":"Quick Start","what":"Fit Mediation Models Directly","title":"medfit: Infrastructure for Mediation Analysis in R","text":"","code":"# Coming soon: fit_mediation() for direct model fitting med_data <- fit_mediation(   formula_y = Y ~ X + M,   formula_m = M ~ X,   data = data,   treatment = \"X\",   mediator = \"M\",   engine = \"glm\" )"},{"path":"https://data-wise.github.io/medfit/index.html","id":"bootstrap-inference","dir":"","previous_headings":"Quick Start","what":"Bootstrap Inference","title":"medfit: Infrastructure for Mediation Analysis in R","text":"","code":"# Coming soon: bootstrap_mediation() for inference result <- bootstrap_mediation(   statistic_fn = function(theta) theta[\"a\"] * theta[\"b\"],   method = \"parametric\",   mediation_data = med_data,   n_boot = 5000,   ci_level = 0.95,   seed = 12345 )  print(result)"},{"path":[]},{"path":"https://data-wise.github.io/medfit/index.html","id":"s7-classes","dir":"","previous_headings":"Core Components","what":"S7 Classes","title":"medfit: Infrastructure for Mediation Analysis in R","text":"Path coefficients (, b, c’) Parameter estimates variance-covariance matrix Residual variances (Gaussian models) Variable names metadata Supports product--three (2 mediators) product--k (3+ mediators) Flexible design compatible lavaan extraction patterns Extensible complex mediation structures Point estimates confidence intervals Bootstrap distribution Method metadata","code":""},{"path":"https://data-wise.github.io/medfit/index.html","id":"main-functions","dir":"","previous_headings":"Core Components","what":"Main Functions","title":"medfit: Infrastructure for Mediation Analysis in R","text":"Methods : lm, glm, lavaan Engines: GLM (lmer, brms coming soon) Methods: parametric, nonparametric, plugin Parallel processing support","code":""},{"path":"https://data-wise.github.io/medfit/index.html","id":"package-ecosystem","dir":"","previous_headings":"","what":"Package Ecosystem","title":"medfit: Infrastructure for Mediation Analysis in R","text":"medfit foundation three specialized mediation packages: probmed: Probabilistic effect size (P_med) RMediation: Confidence intervals via Distribution Product medrobust: Sensitivity analysis unmeasured confounding","code":"┌─────────────┐                     │   medfit    │                     │ (Foundation)│                     └──────┬──────┘                            │             ┌──────────────┼──────────────┐             │              │              │       ┌─────▼─────┐  ┌────▼────┐  ┌──────▼──────┐       │  probmed  │  │RMediation│  │  medrobust  │       │   (P_med) │  │(DOP,MBCO)│  │(Sensitivity)│       └───────────┘  └─────────┘  └─────────────┘"},{"path":"https://data-wise.github.io/medfit/index.html","id":"documentation","dir":"","previous_headings":"","what":"Documentation","title":"medfit: Infrastructure for Mediation Analysis in R","text":"Comprehensive Quarto vignettes available: Get Started: Quick introduction medfit Introduction: Detailed S7 class documentation Model Extraction: Extract lm/glm/lavaan models Bootstrap Inference: Parametric nonparametric bootstrap methods","code":""},{"path":"https://data-wise.github.io/medfit/index.html","id":"development-status","dir":"","previous_headings":"","what":"Development Status","title":"medfit: Infrastructure for Mediation Analysis in R","text":"Current Phase: MVP Development (Phase 3 Complete) Phase 1: Package setup Phase 2: S7 class architecture (SerialMediationData) Phase 2.5: Comprehensive Quarto documentation Phase 3: Model extraction (lm/glm, lavaan) Phase 4: Model fitting (progress) Phase 5: Bootstrap infrastructure Phase 6: Extended testing Phase 7: Polish & release","code":""},{"path":"https://data-wise.github.io/medfit/index.html","id":"code-quality","dir":"","previous_headings":"Development Status","what":"Code Quality","title":"medfit: Infrastructure for Mediation Analysis in R","text":"Defensive Programming: checkmate input validation, S7 validators class integrity Testing: 184 tests testthat, code coverage tracking CI/CD: R CMD check, lintr, coverage reporting via GitHub Actions See planning/medfit-roadmap.md detailed development plan.","code":""},{"path":"https://data-wise.github.io/medfit/index.html","id":"contributing","dir":"","previous_headings":"","what":"Contributing","title":"medfit: Infrastructure for Mediation Analysis in R","text":"package active development. Contributions welcome! Please: Fork repository Create feature branch dev Make changes tests Submit pull request dev","code":""},{"path":"https://data-wise.github.io/medfit/index.html","id":"code-of-conduct","dir":"","previous_headings":"","what":"Code of Conduct","title":"medfit: Infrastructure for Mediation Analysis in R","text":"Please note medfit project released Contributor Code Conduct. contributing project, agree abide terms.","code":""},{"path":"https://data-wise.github.io/medfit/index.html","id":"license","dir":"","previous_headings":"","what":"License","title":"medfit: Infrastructure for Mediation Analysis in R","text":"GPL (>= 3)","code":""},{"path":"https://data-wise.github.io/medfit/index.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"medfit: Infrastructure for Mediation Analysis in R","text":"use medfit research, please cite:","code":"Tofighi, D. (2025). medfit: Infrastructure for mediation analysis in R. R package version 0.1.0. https://github.com/data-wise/medfit"},{"path":"https://data-wise.github.io/medfit/index.html","id":"related-resources","dir":"","previous_headings":"","what":"Related Resources","title":"medfit: Infrastructure for Mediation Analysis in R","text":"Package Documentation Development Guide Roadmap Ecosystem Strategy","code":""},{"path":"https://data-wise.github.io/medfit/index.html","id":"contact","dir":"","previous_headings":"","what":"Contact","title":"medfit: Infrastructure for Mediation Analysis in R","text":"Author: Davood Tofighi Email: dtofighi@gmail.com ORCID: 0000-0001-8523-7776 Issues: GitHub Issues","code":""},{"path":"https://data-wise.github.io/medfit/reference/BootstrapResult.html","id":null,"dir":"Reference","previous_headings":"","what":"BootstrapResult S7 Class — BootstrapResult","title":"BootstrapResult S7 Class — BootstrapResult","text":"S7 class containing results bootstrap inference, including point estimates, confidence intervals, bootstrap distribution.","code":""},{"path":"https://data-wise.github.io/medfit/reference/BootstrapResult.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"BootstrapResult S7 Class — BootstrapResult","text":"","code":"BootstrapResult(   estimate = integer(0),   ci_lower = integer(0),   ci_upper = integer(0),   ci_level = integer(0),   boot_estimates = integer(0),   n_boot = integer(0),   method = character(0),   call = quote({  }) )"},{"path":"https://data-wise.github.io/medfit/reference/BootstrapResult.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"BootstrapResult S7 Class — BootstrapResult","text":"estimate Numeric scalar: point estimate statistic ci_lower Numeric scalar: lower bound confidence interval ci_upper Numeric scalar: upper bound confidence interval ci_level Numeric scalar: confidence level (e.g., 0.95 95% CI) boot_estimates Numeric vector: bootstrap distribution estimates n_boot Integer scalar: number bootstrap samples method Character scalar: bootstrap method (\"parametric\", \"nonparametric\", \"plugin\") call Call object NULL: original function call","code":""},{"path":"https://data-wise.github.io/medfit/reference/BootstrapResult.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"BootstrapResult S7 Class — BootstrapResult","text":"BootstrapResult S7 object","code":""},{"path":"https://data-wise.github.io/medfit/reference/BootstrapResult.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"BootstrapResult S7 Class — BootstrapResult","text":"class standardizes bootstrap inference results across different bootstrap methods (parametric, nonparametric, plugin). class includes validation ensure consistency method type required fields.","code":""},{"path":"https://data-wise.github.io/medfit/reference/BootstrapResult.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"BootstrapResult S7 Class — BootstrapResult","text":"","code":"if (FALSE) { # \\dontrun{ # Parametric bootstrap result result <- BootstrapResult(   estimate = 0.15,   ci_lower = 0.10,   ci_upper = 0.20,   ci_level = 0.95,   boot_estimates = rnorm(1000, 0.15, 0.02),   n_boot = 1000L,   method = \"parametric\",   call = NULL ) } # }"},{"path":"https://data-wise.github.io/medfit/reference/MediationData.html","id":null,"dir":"Reference","previous_headings":"","what":"MediationData S7 Class — MediationData","title":"MediationData S7 Class — MediationData","text":"S7 class containing standardized mediation model structure, including path coefficients, parameter estimates, variance-covariance matrix, metadata.","code":""},{"path":"https://data-wise.github.io/medfit/reference/MediationData.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"MediationData S7 Class — MediationData","text":"a_path Numeric scalar: effect treatment mediator (path) b_path Numeric scalar: effect mediator outcome (b path) c_prime Numeric scalar: direct effect treatment outcome (c' path) estimates Numeric vector: parameter estimates vcov Numeric matrix: variance-covariance matrix estimates sigma_m Numeric scalar NULL: residual SD mediator model sigma_y Numeric scalar NULL: residual SD outcome model treatment Character scalar: name treatment variable mediator Character scalar: name mediator variable outcome Character scalar: name outcome variable mediator_predictors Character vector: predictor names mediator model outcome_predictors Character vector: predictor names outcome model data Data frame NULL: original data n_obs Integer scalar: number observations converged Logical scalar: whether models converged source_package Character scalar: package/engine used fitting","code":""},{"path":"https://data-wise.github.io/medfit/reference/MediationData.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"MediationData S7 Class — MediationData","text":"MediationData S7 object","code":""},{"path":"https://data-wise.github.io/medfit/reference/MediationData.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"MediationData S7 Class — MediationData","text":"class provides unified container mediation model information extracted various model types (lm, glm, lavaan, etc.). ensures consistency across mediation analysis ecosystem. class includes comprehensive validation ensure data integrity.","code":""},{"path":"https://data-wise.github.io/medfit/reference/MediationData.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"MediationData S7 Class — MediationData","text":"","code":"if (FALSE) { # \\dontrun{ # Create a MediationData object med_data <- MediationData(   a_path = 0.5,   b_path = 0.3,   c_prime = 0.2,   estimates = c(0.5, 0.3, 0.2),   vcov = diag(3) * 0.01,   sigma_m = 1.0,   sigma_y = 1.2,   treatment = \"X\",   mediator = \"M\",   outcome = \"Y\",   mediator_predictors = \"X\",   outcome_predictors = c(\"X\", \"M\"),   data = NULL,   n_obs = 100L,   converged = TRUE,   source_package = \"stats\" ) } # }"},{"path":"https://data-wise.github.io/medfit/reference/SerialMediationData.html","id":null,"dir":"Reference","previous_headings":"","what":"SerialMediationData S7 Class — SerialMediationData","title":"SerialMediationData S7 Class — SerialMediationData","text":"S7 class serial mediation models effect flows multiple mediators sequence: X -> M1 -> M2 -> ... -> Mk -> Y. class supports serial mediation chains length, simple two-mediator models (product--three: * d * b) complex chains many mediators (product--k).","code":""},{"path":"https://data-wise.github.io/medfit/reference/SerialMediationData.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"SerialMediationData S7 Class — SerialMediationData","text":"a_path Numeric scalar: effect treatment first mediator (X -> M1) d_path Numeric vector: sequential mediator--mediator effects 2 mediators (X -> M1 -> M2 -> Y): scalar d21 (M1 -> M2) 3 mediators (X -> M1 -> M2 -> M3 -> Y): c(d21, d32) k mediators: vector length (k-1) b_path Numeric scalar: effect last mediator outcome (Mk -> Y) c_prime Numeric scalar: direct effect treatment outcome (X -> Y) estimates Numeric vector: parameter estimates vcov Numeric matrix: variance-covariance matrix estimates sigma_mediators Numeric vector NULL: residual SDs mediator models. Length match number mediators. First element residual SD M1 model, second element M2 model, etc. sigma_y Numeric scalar NULL: residual SD outcome model treatment Character scalar: name treatment variable mediators Character vector: names mediators sequential order. First element M1, second element M2, etc. outcome Character scalar: name outcome variable mediator_predictors List character vectors: predictor names mediator model. First list element contains predictors M1 (typically just \"X\"), second element contains predictors M2 (typically c(\"X\", \"M1\")), etc. outcome_predictors Character vector: predictor names outcome model data Data frame NULL: original data n_obs Integer scalar: number observations converged Logical scalar: whether models converged source_package Character scalar: package/engine used fitting","code":""},{"path":"https://data-wise.github.io/medfit/reference/SerialMediationData.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"SerialMediationData S7 Class — SerialMediationData","text":"SerialMediationData S7 object","code":""},{"path":[]},{"path":"https://data-wise.github.io/medfit/reference/SerialMediationData.html","id":"serial-mediation-structure","dir":"Reference","previous_headings":"","what":"Serial Mediation Structure","title":"SerialMediationData S7 Class — SerialMediationData","text":"Serial mediation models indirect effect flowing sequence mediators. total indirect effect product path coefficients: 2 mediators (product--three): Indirect = * d * b 3 mediators (product--four): Indirect = * d21 * d32 * b k mediators (product--k+1): Indirect = * d21 * d32 * ... * d(k,k-1) * b","code":""},{"path":"https://data-wise.github.io/medfit/reference/SerialMediationData.html","id":"path-notation","dir":"Reference","previous_headings":"","what":"Path Notation","title":"SerialMediationData S7 Class — SerialMediationData","text":": Treatment -> First mediator (X -> M1) d21: First -> Second mediator (M1 -> M2) d32: Second -> Third mediator (M2 -> M3) dji: Previous mediator -> Current mediator b: Last mediator -> Outcome (Mk -> Y) c': Direct effect (X -> Y, controlling mediators)","code":""},{"path":"https://data-wise.github.io/medfit/reference/SerialMediationData.html","id":"extensibility","dir":"Reference","previous_headings":"","what":"Extensibility","title":"SerialMediationData S7 Class — SerialMediationData","text":"class designed handle serial chains length: Minimal case: 2 mediators (length(d_path) = 1) upper limit chain length Validator ensures consistency mediators paths","code":""},{"path":"https://data-wise.github.io/medfit/reference/SerialMediationData.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"SerialMediationData S7 Class — SerialMediationData","text":"","code":"if (FALSE) { # \\dontrun{ # Two-mediator serial mediation (X -> M1 -> M2 -> Y) # Product-of-three: a * d * b serial_data <- SerialMediationData(   a_path = 0.5,       # X -> M1   d_path = 0.4,       # M1 -> M2 (scalar for 2 mediators)   b_path = 0.3,       # M2 -> Y   c_prime = 0.1,      # X -> Y (direct)   estimates = c(0.5, 0.4, 0.3, 0.1),   vcov = diag(4) * 0.01,   sigma_mediators = c(1.0, 1.1),  # SD for M1, M2 models   sigma_y = 1.2,   treatment = \"X\",   mediators = c(\"M1\", \"M2\"),   outcome = \"Y\",   mediator_predictors = list(     c(\"X\"),           # M1 ~ X     c(\"X\", \"M1\")      # M2 ~ X + M1   ),   outcome_predictors = c(\"X\", \"M1\", \"M2\"),  # Y ~ X + M1 + M2   data = NULL,   n_obs = 100L,   converged = TRUE,   source_package = \"lavaan\" )  # Three-mediator serial mediation (X -> M1 -> M2 -> M3 -> Y) # Product-of-four: a * d21 * d32 * b serial_data_3 <- SerialMediationData(   a_path = 0.5,           # X -> M1   d_path = c(0.4, 0.35),  # M1 -> M2, M2 -> M3 (vector for 3 mediators)   b_path = 0.3,           # M3 -> Y   c_prime = 0.1,   estimates = c(0.5, 0.4, 0.35, 0.3, 0.1),   vcov = diag(5) * 0.01,   sigma_mediators = c(1.0, 1.1, 1.05),  # SD for M1, M2, M3 models   sigma_y = 1.2,   treatment = \"X\",   mediators = c(\"M1\", \"M2\", \"M3\"),   outcome = \"Y\",   mediator_predictors = list(     c(\"X\"),              # M1 ~ X     c(\"X\", \"M1\"),        # M2 ~ X + M1     c(\"X\", \"M1\", \"M2\")   # M3 ~ X + M1 + M2   ),   outcome_predictors = c(\"X\", \"M1\", \"M2\", \"M3\"),   data = NULL,   n_obs = 100L,   converged = TRUE,   source_package = \"lavaan\" ) } # }"},{"path":"https://data-wise.github.io/medfit/reference/bootstrap_mediation.html","id":null,"dir":"Reference","previous_headings":"","what":"Perform Bootstrap Inference for Mediation Statistics — bootstrap_mediation","title":"Perform Bootstrap Inference for Mediation Statistics — bootstrap_mediation","text":"Conduct bootstrap inference compute confidence intervals mediation statistics. Supports parametric, nonparametric, plugin methods.","code":""},{"path":"https://data-wise.github.io/medfit/reference/bootstrap_mediation.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Perform Bootstrap Inference for Mediation Statistics — bootstrap_mediation","text":"","code":"bootstrap_mediation(   statistic_fn,   method = c(\"parametric\", \"nonparametric\", \"plugin\"),   mediation_data = NULL,   data = NULL,   n_boot = 1000,   ci_level = 0.95,   parallel = FALSE,   ncores = NULL,   seed = NULL,   ... )"},{"path":"https://data-wise.github.io/medfit/reference/bootstrap_mediation.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Perform Bootstrap Inference for Mediation Statistics — bootstrap_mediation","text":"statistic_fn Function computes statistic interest. parametric bootstrap: receives parameter vector, returns scalar nonparametric bootstrap: receives data frame, returns scalar plugin: receives parameter vector, returns scalar method Character string: bootstrap method. Options: \"parametric\": Sample multivariate normal (fast, assumes normality) \"nonparametric\": Resample data refit (robust, slower) \"plugin\": Point estimate , CI (fastest) mediation_data MediationData object (required parametric/plugin) data Data frame (required nonparametric bootstrap) n_boot Integer: number bootstrap samples (default: 1000) ci_level Numeric: confidence level 0 1 (default: 0.95) parallel Logical: use parallel processing? (default: FALSE) ncores Integer: number cores parallel processing. NULL, uses detectCores() - 1 seed Integer: random seed reproducibility (optional recommended) ... Additional arguments (reserved future use)","code":""},{"path":"https://data-wise.github.io/medfit/reference/bootstrap_mediation.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Perform Bootstrap Inference for Mediation Statistics — bootstrap_mediation","text":"BootstrapResult object containing: Point estimate Confidence interval bounds Bootstrap distribution (parametric nonparametric) Method used","code":""},{"path":[]},{"path":"https://data-wise.github.io/medfit/reference/bootstrap_mediation.html","id":"bootstrap-methods","dir":"Reference","previous_headings":"","what":"Bootstrap Methods","title":"Perform Bootstrap Inference for Mediation Statistics — bootstrap_mediation","text":"Parametric Bootstrap (method = \"parametric\"): Samples parameter vectors \\(N(\\hat{\\theta}, \\hat{\\Sigma})\\) Fast efficient Assumes asymptotic normality parameters Recommended applications n > 50 Nonparametric Bootstrap (method = \"nonparametric\"): Resamples observations replacement Refits models bootstrap sample robust, normality assumption Computationally intensive Use normality questionable n small Plugin Estimator (method = \"plugin\"): Computes point estimate confidence interval Fastest method Use quick checks CI needed","code":""},{"path":"https://data-wise.github.io/medfit/reference/bootstrap_mediation.html","id":"parallel-processing","dir":"Reference","previous_headings":"","what":"Parallel Processing","title":"Perform Bootstrap Inference for Mediation Statistics — bootstrap_mediation","text":"Set parallel = TRUE use multiple cores: Automatically detects available cores Falls back sequential parallel fails Seed handling ensures reproducibility","code":""},{"path":"https://data-wise.github.io/medfit/reference/bootstrap_mediation.html","id":"reproducibility","dir":"Reference","previous_headings":"","what":"Reproducibility","title":"Perform Bootstrap Inference for Mediation Statistics — bootstrap_mediation","text":"Always set seed reproducible results:","code":"bootstrap_mediation(..., seed = 12345)"},{"path":[]},{"path":"https://data-wise.github.io/medfit/reference/bootstrap_mediation.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Perform Bootstrap Inference for Mediation Statistics — bootstrap_mediation","text":"","code":"if (FALSE) { # \\dontrun{ # Parametric bootstrap for indirect effect result <- bootstrap_mediation(   statistic_fn = function(theta) theta[\"a\"] * theta[\"b\"],   method = \"parametric\",   mediation_data = med_data,   n_boot = 5000,   ci_level = 0.95,   seed = 12345 )  # Nonparametric bootstrap with parallel processing result <- bootstrap_mediation(   statistic_fn = function(data) {     # Refit models and compute statistic     # ...   },   method = \"nonparametric\",   data = mydata,   n_boot = 5000,   parallel = TRUE,   seed = 12345 )  # Plugin estimator (no CI) result <- bootstrap_mediation(   statistic_fn = function(theta) theta[\"a\"] * theta[\"b\"],   method = \"plugin\",   mediation_data = med_data ) } # }"},{"path":"https://data-wise.github.io/medfit/reference/dot-extract_mediation_lm_impl.html","id":null,"dir":"Reference","previous_headings":"","what":"Internal Implementation for lm/glm Extraction — .extract_mediation_lm_impl","title":"Internal Implementation for lm/glm Extraction — .extract_mediation_lm_impl","text":"Internal Implementation lm/glm Extraction","code":""},{"path":"https://data-wise.github.io/medfit/reference/dot-extract_mediation_lm_impl.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Internal Implementation for lm/glm Extraction — .extract_mediation_lm_impl","text":"","code":".extract_mediation_lm_impl(   model_m,   model_y,   treatment,   mediator,   outcome = NULL,   data = NULL )"},{"path":"https://data-wise.github.io/medfit/reference/dot-extract_mediation_lm_impl.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Internal Implementation for lm/glm Extraction — .extract_mediation_lm_impl","text":"model_m Fitted model mediator model_y Fitted model outcome treatment Treatment variable name mediator Mediator variable name outcome Outcome variable name (auto-detected NULL) data Original data (extracted model NULL)","code":""},{"path":"https://data-wise.github.io/medfit/reference/dot-extract_mediation_lm_impl.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Internal Implementation for lm/glm Extraction — .extract_mediation_lm_impl","text":"MediationData object","code":""},{"path":"https://data-wise.github.io/medfit/reference/dot-extract_sigma.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract Residual Standard Deviation from Model — .extract_sigma","title":"Extract Residual Standard Deviation from Model — .extract_sigma","text":"Extract Residual Standard Deviation Model","code":""},{"path":"https://data-wise.github.io/medfit/reference/dot-extract_sigma.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract Residual Standard Deviation from Model — .extract_sigma","text":"","code":".extract_sigma(model)"},{"path":"https://data-wise.github.io/medfit/reference/dot-extract_sigma.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract Residual Standard Deviation from Model — .extract_sigma","text":"model Fitted model object","code":""},{"path":"https://data-wise.github.io/medfit/reference/dot-extract_sigma.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract Residual Standard Deviation from Model — .extract_sigma","text":"Numeric scalar NULL","code":""},{"path":"https://data-wise.github.io/medfit/reference/dot-get_response_var.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract Response Variable Name from Model — .get_response_var","title":"Extract Response Variable Name from Model — .get_response_var","text":"Extract Response Variable Name Model","code":""},{"path":"https://data-wise.github.io/medfit/reference/dot-get_response_var.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract Response Variable Name from Model — .get_response_var","text":"","code":".get_response_var(model)"},{"path":"https://data-wise.github.io/medfit/reference/dot-get_response_var.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract Response Variable Name from Model — .get_response_var","text":"model Fitted model object","code":""},{"path":"https://data-wise.github.io/medfit/reference/dot-get_response_var.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract Response Variable Name from Model — .get_response_var","text":"Character string: response variable name","code":""},{"path":"https://data-wise.github.io/medfit/reference/dot-register_lavaan_method.html","id":null,"dir":"Reference","previous_headings":"","what":"Register lavaan Method for extract_mediation — .register_lavaan_method","title":"Register lavaan Method for extract_mediation — .register_lavaan_method","text":"function called .onLoad() register S7 method lavaan objects lavaan package available.","code":""},{"path":"https://data-wise.github.io/medfit/reference/dot-register_lavaan_method.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Register lavaan Method for extract_mediation — .register_lavaan_method","text":"","code":".register_lavaan_method()"},{"path":"https://data-wise.github.io/medfit/reference/extract_mediation.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract Mediation Structure from Fitted Models — extract_mediation","title":"Extract Mediation Structure from Fitted Models — extract_mediation","text":"Generic function extract mediation structure (, b, c' paths variance-covariance matrices) fitted models. function provides unified interface extracting mediation information various model types (lm, glm, lavaan, lmer, brms, etc.).","code":""},{"path":"https://data-wise.github.io/medfit/reference/extract_mediation.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract Mediation Structure from Fitted Models — extract_mediation","text":"","code":"extract_mediation(object, ...)"},{"path":"https://data-wise.github.io/medfit/reference/extract_mediation.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract Mediation Structure from Fitted Models — extract_mediation","text":"object Fitted model object (lm, glm, lavaan, etc.) ... Additional arguments passed methods. Common arguments include: treatment: Character string specifying treatment variable name mediator: Character string specifying mediator variable name Method-specific arguments (see individual method documentation)","code":""},{"path":"https://data-wise.github.io/medfit/reference/extract_mediation.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract Mediation Structure from Fitted Models — extract_mediation","text":"MediationData object containing: Path coefficients (, b, c') Full parameter vector variance-covariance matrix Residual variances (Gaussian models) Variable names metadata Original data (available)","code":""},{"path":"https://data-wise.github.io/medfit/reference/extract_mediation.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Extract Mediation Structure from Fitted Models — extract_mediation","text":"extract_mediation() generic provides methods different model types: lm/glm: Extract linear generalized linear models lavaan: Extract structural equation models lmerMod: Extract mixed-effects models (future) brmsfit: Extract Bayesian models (future) Note: OpenMx extraction planned future release. methods return standardized MediationData object can used medfit functions dependent packages (probmed, RMediation, medrobust).","code":""},{"path":[]},{"path":"https://data-wise.github.io/medfit/reference/extract_mediation.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Extract Mediation Structure from Fitted Models — extract_mediation","text":"","code":"if (FALSE) { # \\dontrun{ # Extract from lm models fit_m <- lm(M ~ X + C, data = mydata) fit_y <- lm(Y ~ X + M + C, data = mydata) med_data <- extract_mediation(fit_m, model_y = fit_y,                               treatment = \"X\", mediator = \"M\")  # Extract from lavaan model library(lavaan) model <- \"   M ~ a*X   Y ~ b*M + cp*X \" fit <- sem(model, data = mydata) med_data <- extract_mediation(fit, treatment = \"X\", mediator = \"M\") } # }"},{"path":"https://data-wise.github.io/medfit/reference/extract_mediation_lavaan.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract Mediation Structure from lavaan Model — extract_mediation_lavaan","title":"Extract Mediation Structure from lavaan Model — extract_mediation_lavaan","text":"Internal function extracting mediation structure lavaan models. function registered S7 method .onLoad() lavaan available.","code":""},{"path":"https://data-wise.github.io/medfit/reference/extract_mediation_lavaan.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract Mediation Structure from lavaan Model — extract_mediation_lavaan","text":"","code":"extract_mediation_lavaan(   object,   treatment,   mediator,   outcome = NULL,   a_label = \"a\",   b_label = \"b\",   cp_label = \"cp\",   standardized = FALSE,   ... )"},{"path":"https://data-wise.github.io/medfit/reference/extract_mediation_lavaan.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract Mediation Structure from lavaan Model — extract_mediation_lavaan","text":"object Fitted lavaan model object treatment Character: name treatment variable mediator Character: name mediator variable outcome Character: name outcome variable (optional, auto-detected) a_label Character: label path lavaan model (default: \"\") b_label Character: label b path lavaan model (default: \"b\") cp_label Character: label c' path lavaan model (default: \"cp\") standardized Logical: extract standardized coefficients? (default: FALSE) ... Additional arguments (ignored)","code":""},{"path":"https://data-wise.github.io/medfit/reference/extract_mediation_lavaan.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract Mediation Structure from lavaan Model — extract_mediation_lavaan","text":"MediationData object","code":""},{"path":"https://data-wise.github.io/medfit/reference/extract_mediation_lavaan.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Extract Mediation Structure from lavaan Model — extract_mediation_lavaan","text":"method extracts mediation structure fitted lavaan SEM model. lavaan model specify labeled paths mediation structure.","code":""},{"path":"https://data-wise.github.io/medfit/reference/extract_mediation_lavaan.html","id":"typical-lavaan-model-specification","dir":"Reference","previous_headings":"","what":"Typical lavaan Model Specification","title":"Extract Mediation Structure from lavaan Model — extract_mediation_lavaan","text":"","code":"model <- \"   # Mediator model   M ~ a*X    # Outcome model   Y ~ b*M + cp*X    # Indirect and total effects (optional)   indirect := a*b   total := cp + a*b \""},{"path":"https://data-wise.github.io/medfit/reference/extract_mediation_lavaan.html","id":"path-labels","dir":"Reference","previous_headings":"","what":"Path Labels","title":"Extract Mediation Structure from lavaan Model — extract_mediation_lavaan","text":"default, function looks paths labeled: : Treatment -> Mediator path b: Mediator -> Outcome path cp: Treatment -> Outcome (direct effect) path can customize labels using a_label, b_label, cp_label arguments.","code":""},{"path":"https://data-wise.github.io/medfit/reference/extract_mediation_lavaan.html","id":"alternative-unlabeled-paths","dir":"Reference","previous_headings":"","what":"Alternative: Unlabeled Paths","title":"Extract Mediation Structure from lavaan Model — extract_mediation_lavaan","text":"paths labeled, function attempt identify variable names. requires specifying treatment, mediator, outcome arguments.","code":""},{"path":"https://data-wise.github.io/medfit/reference/extract_mediation_lavaan.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Extract Mediation Structure from lavaan Model — extract_mediation_lavaan","text":"","code":"if (FALSE) { # \\dontrun{ library(lavaan)  # Define mediation model model <- \"   M ~ a*X   Y ~ b*M + cp*X \"  # Fit model fit <- sem(model, data = mydata)  # Extract mediation structure med_data <- extract_mediation(   fit,   treatment = \"X\",   mediator = \"M\",   outcome = \"Y\" ) } # }"},{"path":"https://data-wise.github.io/medfit/reference/fit_mediation.html","id":null,"dir":"Reference","previous_headings":"","what":"Fit Mediation Models — fit_mediation","title":"Fit Mediation Models — fit_mediation","text":"Fit mediation models using specified modeling engine. function provides convenient formula-based interface fitting mediator outcome models simultaneously.","code":""},{"path":"https://data-wise.github.io/medfit/reference/fit_mediation.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fit Mediation Models — fit_mediation","text":"","code":"fit_mediation(   formula_y,   formula_m,   data,   treatment,   mediator,   engine = \"glm\",   family_y = stats::gaussian(),   family_m = stats::gaussian(),   ... )"},{"path":"https://data-wise.github.io/medfit/reference/fit_mediation.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fit Mediation Models — fit_mediation","text":"formula_y Formula outcome model (e.g., Y ~ X + M + C) formula_m Formula mediator model (e.g., M ~ X + C) data Data frame containing variables treatment Character string: name treatment variable mediator Character string: name mediator variable engine Character string: modeling engine use. Options: \"glm\": Generalized linear models (current) \"lmer\": Mixed-effects models (future) \"brms\": Bayesian regression models (future) family_y Family object outcome model (default: gaussian()) family_m Family object mediator model (default: gaussian()) ... Additional arguments passed engine-specific function","code":""},{"path":"https://data-wise.github.io/medfit/reference/fit_mediation.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fit Mediation Models — fit_mediation","text":"MediationData object containing fitted mediation structure","code":""},{"path":"https://data-wise.github.io/medfit/reference/fit_mediation.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Fit Mediation Models — fit_mediation","text":"fit_mediation() function fits mediator model outcome model using specified engine, extracts mediation structure using extract_mediation().","code":""},{"path":"https://data-wise.github.io/medfit/reference/fit_mediation.html","id":"supported-engines","dir":"Reference","previous_headings":"","what":"Supported Engines","title":"Fit Mediation Models — fit_mediation","text":"GLM (engine = \"glm\"): Fits models using stats::glm() Supports GLM families (gaussian, binomial, poisson, etc.) Gaussian models, extracts residual variances Future Engines: \"lmer\": Mixed-effects models via lme4 \"brms\": Bayesian models via brms","code":""},{"path":"https://data-wise.github.io/medfit/reference/fit_mediation.html","id":"model-specification","dir":"Reference","previous_headings":"","what":"Model Specification","title":"Fit Mediation Models — fit_mediation","text":"formulas follow standard R formula syntax: formula_m: Mediator model (e.g., M ~ X + C1 + C2) formula_y: Outcome model (e.g., Y ~ X + M + C1 + C2) mediator must appear formula_y, treatment must appear formulas.","code":""},{"path":[]},{"path":"https://data-wise.github.io/medfit/reference/fit_mediation.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Fit Mediation Models — fit_mediation","text":"","code":"if (FALSE) { # \\dontrun{ # Fit Gaussian mediation model med_data <- fit_mediation(   formula_y = Y ~ X + M + C,   formula_m = M ~ X + C,   data = mydata,   treatment = \"X\",   mediator = \"M\",   engine = \"glm\" )  # Fit with binary outcome med_data <- fit_mediation(   formula_y = Y ~ X + M + C,   formula_m = M ~ X + C,   data = mydata,   treatment = \"X\",   mediator = \"M\",   engine = \"glm\",   family_y = binomial() ) } # }"},{"path":"https://data-wise.github.io/medfit/reference/medfit-package.html","id":null,"dir":"Reference","previous_headings":"","what":"medfit: Infrastructure for Mediation Model Fitting and Extraction — medfit-package","title":"medfit: Infrastructure for Mediation Model Fitting and Extraction — medfit-package","text":"Provides S7-based infrastructure fitting mediation models, extracting path coefficients, performing bootstrap inference. Designed foundation package probmed, RMediation, medrobust.","code":""},{"path":"https://data-wise.github.io/medfit/reference/medfit-package.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"medfit: Infrastructure for Mediation Model Fitting and Extraction — medfit-package","text":"Key functions: fit_mediation: Fit mediation models extract_mediation: Extract fitted models bootstrap_mediation: Bootstrap inference Key classes: MediationData: Mediation model structure BootstrapResult: Bootstrap results","code":""},{"path":[]},{"path":"https://data-wise.github.io/medfit/reference/medfit-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"medfit: Infrastructure for Mediation Model Fitting and Extraction — medfit-package","text":"Maintainer: Davood Tofighi dtofighi@gmail.com (ORCID)","code":""},{"path":"https://data-wise.github.io/medfit/reference/print.summary.BootstrapResult.html","id":null,"dir":"Reference","previous_headings":"","what":"Print Summary for BootstrapResult — print.summary.BootstrapResult","title":"Print Summary for BootstrapResult — print.summary.BootstrapResult","text":"Print Summary BootstrapResult","code":""},{"path":"https://data-wise.github.io/medfit/reference/print.summary.BootstrapResult.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Print Summary for BootstrapResult — print.summary.BootstrapResult","text":"","code":"# S3 method for class 'summary.BootstrapResult' print(x, ...)"},{"path":"https://data-wise.github.io/medfit/reference/print.summary.BootstrapResult.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Print Summary for BootstrapResult — print.summary.BootstrapResult","text":"x summary.BootstrapResult object ... Additional arguments (ignored)","code":""},{"path":"https://data-wise.github.io/medfit/reference/print.summary.MediationData.html","id":null,"dir":"Reference","previous_headings":"","what":"Print Summary for MediationData — print.summary.MediationData","title":"Print Summary for MediationData — print.summary.MediationData","text":"Print Summary MediationData","code":""},{"path":"https://data-wise.github.io/medfit/reference/print.summary.MediationData.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Print Summary for MediationData — print.summary.MediationData","text":"","code":"# S3 method for class 'summary.MediationData' print(x, ...)"},{"path":"https://data-wise.github.io/medfit/reference/print.summary.MediationData.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Print Summary for MediationData — print.summary.MediationData","text":"x summary.MediationData object ... Additional arguments (ignored)","code":""},{"path":"https://data-wise.github.io/medfit/reference/print.summary.SerialMediationData.html","id":null,"dir":"Reference","previous_headings":"","what":"Print Summary for SerialMediationData — print.summary.SerialMediationData","title":"Print Summary for SerialMediationData — print.summary.SerialMediationData","text":"Print Summary SerialMediationData","code":""},{"path":"https://data-wise.github.io/medfit/reference/print.summary.SerialMediationData.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Print Summary for SerialMediationData — print.summary.SerialMediationData","text":"","code":"# S3 method for class 'summary.SerialMediationData' print(x, ...)"},{"path":"https://data-wise.github.io/medfit/reference/print.summary.SerialMediationData.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Print Summary for SerialMediationData — print.summary.SerialMediationData","text":"x summary.SerialMediationData object ... Additional arguments (ignored)","code":""},{"path":[]},{"path":"https://data-wise.github.io/medfit/news/index.html","id":"medfit-development-version-1","dir":"Changelog","previous_headings":"","what":"medfit 0.1.0","title":"medfit (development version)","text":"Initial development release","code":""},{"path":"https://data-wise.github.io/medfit/news/index.html","id":"major-features-development-version","dir":"Changelog","previous_headings":"medfit 0.1.0","what":"Major Features","title":"medfit (development version)","text":"Added checkmate package fail-fast input validation extraction functions now use checkmate::assert_* argument validation Provides fast (C-based), memory-efficient assertions informative error messages Complements S7 validators: checkmate function entry, S7 class integrity Added .lintr configuration static code analysis Added lint.yaml GitHub Action automated linting PRs Comprehensive CLAUDE.md section defensive programming best practices 167+ tests passing 0 errors, 0 warnings, 0 notes MediationData class simple mediation (X -> M -> Y) Supports product--three (2 mediators: * d * b) Extensible product--k (3+ mediators: * d21 * d32 * … * b) Flexible d_path design: scalar 2 mediators, vector 3+ Compatible lavaan extraction patterns BootstrapResult class bootstrap inference results Comprehensive validators ensuring data integrity Print, summary, show methods classes extract_mediation() - Extract mediation structure fitted models fit_mediation() - Fit mediation models (stub) bootstrap_mediation() - Bootstrap inference (stub)","code":""},{"path":"https://data-wise.github.io/medfit/news/index.html","id":"documentation-development-version","dir":"Changelog","previous_headings":"medfit 0.1.0","what":"Documentation","title":"medfit (development version)","text":"Get Started (vignettes/medfit.qmd): Quick introduction examples Introduction (vignettes/articles/introduction.qmd): Detailed S7 class architecture Model Extraction (vignettes/articles/extraction.qmd): Extract lm/glm/lavaan Bootstrap Inference (vignettes/articles/bootstrap.qmd): Parametric/nonparametric methods vignettes use native Quarto format execute: options YAML Published https://data-wise.github.io/medfit/ ASCII-compliant (replaced non-ASCII arrows multiplication symbols) Explicit @param tags S7 class properties @noRd S7 methods prevent namespace export issues","code":""},{"path":"https://data-wise.github.io/medfit/news/index.html","id":"infrastructure-development-version","dir":"Changelog","previous_headings":"medfit 0.1.0","what":"Infrastructure","title":"medfit (development version)","text":"Full coverage simple serial mediation S7 classes Validation tests ensure data integrity across mediation types Tests updated checkmate error message format 1 skip: test lavaan--installed path lavaan installed R-CMD-check Ubuntu (release, devel, oldrel-1), macOS, Windows lint.yaml static code analysis lintr pkgdown deployment Quarto rendering Test coverage tracking Codecov Dependabot automated GitHub Actions updates Bootstrap 5 Flatly theme Comprehensive reference documentation Four Quarto vignettes rich examples Auto-deployment push main branch","code":""},{"path":"https://data-wise.github.io/medfit/news/index.html","id":"development-status-development-version","dir":"Changelog","previous_headings":"medfit 0.1.0","what":"Development Status","title":"medfit (development version)","text":"Current Phase: Phase 3 Complete Next: Phase 4 (Model Fitting) Phase 1: Package setup Phase 2: S7 class architecture (simple + serial mediation) Phase 2.5: Comprehensive Quarto documentation Phase 3: Model extraction (lm/glm, lavaan) Phase 4: Model fitting (progress) Phase 5: Bootstrap infrastructure Phase 6: Extended testing Phase 7: Polish & release","code":""},{"path":"https://data-wise.github.io/medfit/news/index.html","id":"documentation-improvements-development-version","dir":"Changelog","previous_headings":"medfit 0.1.0","what":"Documentation Improvements","title":"medfit (development version)","text":"S7 Class Documentation: Added explicit @param tags class properties S7 Method Documentation: Updated use @noRd prevent namespace export issues Generic Documentation: Fixed extract_mediation() document generic parameters CLAUDE.md: Added comprehensive S7 documentation patterns section future reference","code":""},{"path":"https://data-wise.github.io/medfit/news/index.html","id":"fixes-development-version","dir":"Changelog","previous_headings":"medfit 0.1.0","what":"Fixes","title":"medfit (development version)","text":"OpenMx integration postponed future release GitHub Actions workflows now passing Call S7::S4_register() class methods_register() Import full methods package (just @importFrom methods ) Per official S7 documentation: https://rconsortium.github.io/S7/articles/packages.html SerialMediationData print/summary methods now work installed package context Removed 4 previously skipped tests (now passing) LICENSE: Added + file LICENSE DESCRIPTION properly reference LICENSE file S7-generated constructor defaults whitespace formatting differences known S7/roxygen2 limitation","code":""},{"path":"https://data-wise.github.io/medfit/news/index.html","id":"known-issues-development-version","dir":"Changelog","previous_headings":"medfit 0.1.0","what":"Known Issues","title":"medfit (development version)","text":"fit_mediation() bootstrap_mediation() stubs awaiting implementation","code":""},{"path":"https://data-wise.github.io/medfit/news/index.html","id":"internal-development-version","dir":"Changelog","previous_headings":"medfit 0.1.0","what":"Internal","title":"medfit (development version)","text":"Package skeleton created proper structure GitHub repository initialized dev branch workflow pkgdown website configuration Comprehensive CLAUDE.md roadmap documentation development version. Breaking changes may occur.","code":""}]
