<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>mediationverse Coordination Brainstorming ‚Ä¢ medfit</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="favicon-96x96.png"><link rel="icon" type="‚Äùimage/svg+xml‚Äù" href="favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png"><link rel="icon" sizes="any" href="favicon.ico"><link rel="manifest" href="site.webmanifest"><!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/Inter-0.4.10/font.css" rel="stylesheet"><link href="deps/Fira_Code-0.4.10/font.css" rel="stylesheet"><link href="deps/Montserrat-0.4.10/font.css" rel="stylesheet"><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="mediationverse Coordination Brainstorming"><meta property="og:image" content="https://data-wise.github.io/medfit/logo.png"><meta name="robots" content="noindex"></head><body><p>





  pkgdown/mathjax-config.html

  

  </p>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">medfit</a>

    <small class="nav-text text-default me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.1.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="index.html" aria-label="Home"><span class="fa fas fa-home fa-lg"></span></a></li>
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="articles/getting-started.html">Getting Started</a></li>
    <li><h6 class="dropdown-header" data-toc-skip>‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</h6></li>
    <li><h6 class="dropdown-header" data-toc-skip>Detailed Guides</h6></li>
    <li><a class="dropdown-item" href="articles/introduction.html">Introduction to medfit</a></li>
    <li><a class="dropdown-item" href="articles/extraction.html">Model Extraction</a></li>
    <li><a class="dropdown-item" href="articles/bootstrap.html">Bootstrap Inference</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-ecosystem" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Ecosystem</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-ecosystem"><li><h6 class="dropdown-header" data-toc-skip>Core Packages</h6></li>
    <li><a class="external-link dropdown-item" href="https://data-wise.github.io/mediationverse/">mediationverse (Meta-package)</a></li>
    <li><a class="dropdown-item" href="https://data-wise.github.io/medfit/">medfit (Foundation)</a></li>
    <li><a class="external-link dropdown-item" href="https://data-wise.github.io/probmed/">probmed (P_med Effect Size)</a></li>
    <li><a class="external-link dropdown-item" href="https://data-wise.github.io/rmediation/">RMediation (Confidence Intervals)</a></li>
    <li><a class="external-link dropdown-item" href="https://data-wise.github.io/medrobust/">medrobust (Sensitivity Analysis)</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Support Packages</h6></li>
    <li><a class="external-link dropdown-item" href="https://data-wise.github.io/medsim/">medsim (Simulation Infrastructure)</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-status" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true"><span class="fa fas fa-chart-line"></span> Status</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-status"><li><a class="external-link dropdown-item" href="https://github.com/data-wise/mediationverse/blob/main/STATUS.md">Package Status Dashboard</a></li>
    <li><a class="external-link dropdown-item" href="https://data-wise.github.io/mediationverse/articles/roadmap.html">Development Roadmap</a></li>
    <li><a class="external-link dropdown-item" href="https://data-wise.github.io/mediationverse/articles/contributing.html">Contributing Guide</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">News</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/data-wise/medfit" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-title-body">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="logo.png" class="logo" alt=""><h1>mediationverse Coordination Brainstorming</h1>
      <small class="dont-index">Source: <a href="https://github.com/data-wise/medfit/blob/main/COORDINATION-BRAINSTORM.md" class="external-link"><code>COORDINATION-BRAINSTORM.md</code></a></small>
    </div>

<div id="mediationverse-coordination-brainstorming" class="section level1">

<p><strong>Date</strong>: 2025-12-15 <strong>Context</strong>: medfit MVP nearing completion, need to coordinate integration with mediationverse ecosystem <strong>Decision Made</strong>: medfit is the foundation package (per three-package-ecosystem-strategy.md, Dec 2, 2025)</p>
<hr><div class="section level2">
<h2 id="id_-executive-summary">üéØ Executive Summary<a class="anchor" aria-label="anchor" href="#id_-executive-summary"></a></h2>
<p><strong>Strategic Decision Already Made</strong>: Create medfit as foundation package providing: - Model fitting API: <code><a href="reference/fit_mediation.html">fit_mediation()</a></code> - Model extraction API: <code><a href="reference/extract_mediation.html">extract_mediation()</a></code> - Bootstrap infrastructure: <code><a href="reference/bootstrap_mediation.html">bootstrap_mediation()</a></code> - S7 base classes: <code>MediationData</code>, <code>SerialMediationData</code>, <code>BootstrapResult</code></p>
<p><strong>This Document</strong>: Implementation coordination mechanics for mediationverse loading, generic functions, and CMAverse integration.</p>
<hr></div>
<div class="section level2">
<h2 id="id_-findings-from-strategic-planning-documents">üìã Findings from Strategic Planning Documents<a class="anchor" aria-label="anchor" href="#id_-findings-from-strategic-planning-documents"></a></h2>
<div class="section level3">
<h3 id="key-document-probmedplanningthree-package-ecosystem-strategymd">Key Document: <code>probmed/planning/three-package-ecosystem-strategy.md</code>
<a class="anchor" aria-label="anchor" href="#key-document-probmedplanningthree-package-ecosystem-strategymd"></a></h3>
<p><strong>Date</strong>: Dec 2, 2025 <strong>Decision</strong>: Option B (medfit) ‚úÖ DECIDED</p>
<p><strong>Current Redundancies Identified</strong>: - Bootstrap code duplicated 3x (probmed, RMediation, medrobust) - lavaan extraction duplicated 2x (probmed, RMediation) - S7 class definitions duplicated across packages - Formula parsing logic duplicated</p>
<p><strong>Solution Architecture</strong>:</p>
<pre><code>medfit (foundation package)
‚îú‚îÄ‚îÄ fit_mediation()      # Formula interface
‚îú‚îÄ‚îÄ extract_mediation()  # Generic with lm/glm/lavaan methods
‚îú‚îÄ‚îÄ bootstrap_mediation() # Three methods (parametric/nonparametric/plugin)
‚îî‚îÄ‚îÄ S7 Classes           # MediationData, SerialMediationData, BootstrapResult
    ‚Üì Imports
probmed | RMediation | medrobust</code></pre>
<p><strong>Migration Strategy</strong>: 1. Complete medfit MVP (current sprint) 2. probmed migrates to medfit (next sprint) 3. RMediation migrates to medfit (following sprint) 4. medrobust integrates optionally (parallel track)</p>
<hr></div>
</div>
<div class="section level2">
<h2 id="id_-generic-functions-strategy">üîß Generic Functions Strategy<a class="anchor" aria-label="anchor" href="#id_-generic-functions-strategy"></a></h2>
<div class="section level3">
<h3 id="core-generics-medfit-provides">Core Generics (medfit provides)<a class="anchor" aria-label="anchor" href="#core-generics-medfit-provides"></a></h3>
<div class="section level4">
<h4 id="id_1-extract_mediation---model-extraction-generic">1. <code>extract_mediation()</code> - Model Extraction Generic<a class="anchor" aria-label="anchor" href="#id_1-extract_mediation---model-extraction-generic"></a></h4>
<p><strong>Purpose</strong>: Extract path coefficients and covariance matrices from fitted models</p>
<p><strong>Current Methods</strong> (medfit MVP): - <code>extract_mediation.lm()</code> - <code>extract_mediation.glm()</code> - <code>extract_mediation.lavaan()</code></p>
<p><strong>Planned Methods</strong> (post-MVP): - <code>extract_mediation.lmerMod()</code> - Mixed models - <code>extract_mediation.brmsfit()</code> - Bayesian models - <code>extract_mediation.stanreg()</code> - rstanarm models</p>
<p><strong>Design Pattern</strong>:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Generic signature</span></span>
<span><span class="va">extract_mediation</span> <span class="op">&lt;-</span> <span class="fu">S7</span><span class="fu">::</span><span class="fu"><a href="https://rconsortium.github.io/S7/reference/new_generic.html" class="external-link">new_generic</a></span><span class="op">(</span></span>
<span>  <span class="st">"extract_mediation"</span>,</span>
<span>  dispatch_args <span class="op">=</span> <span class="st">"object"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Each method returns standardized MediationData</span></span>
<span><span class="fu">S7</span><span class="fu">::</span><span class="fu"><a href="https://rconsortium.github.io/S7/reference/method.html" class="external-link">method</a></span><span class="op">(</span><span class="va">extract_mediation</span>, <span class="va">class_lm</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  <span class="va">model_y</span>,</span>
<span>  <span class="va">treatment</span>,</span>
<span>  <span class="va">mediator</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co"># Extract parameters</span></span>
<span>  <span class="co"># Return MediationData object</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p><strong>Coordination Point</strong>: All packages use this generic, add methods as needed</p>
<hr></div>
<div class="section level4">
<h4 id="id_2-fit_mediation---model-fitting-generic">2. <code>fit_mediation()</code> - Model Fitting Generic<a class="anchor" aria-label="anchor" href="#id_2-fit_mediation---model-fitting-generic"></a></h4>
<p><strong>Purpose</strong>: Fit mediation models from formulas</p>
<p><strong>Current Implementation</strong>:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/fit_mediation.html">fit_mediation</a></span><span class="op">(</span></span>
<span>  formula_y <span class="op">=</span> <span class="va">Y</span> <span class="op">~</span> <span class="va">X</span> <span class="op">+</span> <span class="va">M</span> <span class="op">+</span> <span class="va">C</span>,</span>
<span>  formula_m <span class="op">=</span> <span class="va">M</span> <span class="op">~</span> <span class="va">X</span> <span class="op">+</span> <span class="va">C</span>,</span>
<span>  data <span class="op">=</span> <span class="va">data</span>,</span>
<span>  treatment <span class="op">=</span> <span class="st">"X"</span>,</span>
<span>  mediator <span class="op">=</span> <span class="st">"M"</span>,</span>
<span>  engine <span class="op">=</span> <span class="st">"glm"</span>,       <span class="co"># Default</span></span>
<span>  engine_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><strong>Engine Architecture</strong> (CMAverse Integration):</p>
<table class="table"><thead><tr class="header"><th>Engine</th>
<th>Package</th>
<th>Method</th>
<th>Status</th>
<th>Priority</th>
</tr></thead><tbody><tr class="odd"><td><code>"glm"</code></td>
<td>stats (base)</td>
<td>Regression</td>
<td>‚úÖ MVP</td>
<td>P0</td>
</tr><tr class="even"><td><code>"gformula"</code></td>
<td>CMAverse</td>
<td>G-computation</td>
<td>üîÆ Planned</td>
<td>P1</td>
</tr><tr class="odd"><td><code>"ipw"</code></td>
<td>CMAverse</td>
<td>Inverse prob weighting</td>
<td>üîÆ Planned</td>
<td>P1</td>
</tr><tr class="even"><td><code>"tmle"</code></td>
<td>tmle3</td>
<td>Targeted learning</td>
<td>üîÆ Future</td>
<td>P2</td>
</tr><tr class="odd"><td><code>"dml"</code></td>
<td>DoubleML</td>
<td>Double ML</td>
<td>üîÆ Future</td>
<td>P3</td>
</tr></tbody></table><p><strong>CMAverse Integration Pattern</strong>:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># User interface</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/fit_mediation.html">fit_mediation</a></span><span class="op">(</span></span>
<span>  <span class="va">...</span>,</span>
<span>  engine <span class="op">=</span> <span class="st">"gformula"</span>,</span>
<span>  engine_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    EMint <span class="op">=</span> <span class="cn">TRUE</span>,        <span class="co"># Exposure-mediator interaction</span></span>
<span>    mreg <span class="op">=</span> <span class="st">"linear"</span>,     <span class="co"># Mediator regression type</span></span>
<span>    yreg <span class="op">=</span> <span class="st">"linear"</span>,     <span class="co"># Outcome regression type</span></span>
<span>    nboot <span class="op">=</span> <span class="fl">500</span>          <span class="co"># CMAverse-specific bootstrap</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Internal adapter (simplified)</span></span>
<span><span class="va">.fit_mediation_gformula</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">formula_y</span>, <span class="va">formula_m</span>, <span class="va">data</span>,</span>
<span>                                     <span class="va">treatment</span>, <span class="va">mediator</span>,</span>
<span>                                     <span class="va">engine_args</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co"># Check CMAverse available</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"CMAverse"</span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/stop.html" class="external-link">stop</a></span><span class="op">(</span><span class="st">"CMAverse required for gformula engine"</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span></span>
<span>  <span class="co"># Call CMAverse::cmest()</span></span>
<span>  <span class="va">cma_result</span> <span class="op">&lt;-</span> <span class="fu">CMAverse</span><span class="fu">::</span><span class="fu">cmest</span><span class="op">(</span></span>
<span>    data <span class="op">=</span> <span class="va">data</span>,</span>
<span>    model <span class="op">=</span> <span class="st">"gformula"</span>,</span>
<span>    outcome <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/allnames.html" class="external-link">all.vars</a></span><span class="op">(</span><span class="va">formula_y</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,</span>
<span>    exposure <span class="op">=</span> <span class="va">treatment</span>,</span>
<span>    mediator <span class="op">=</span> <span class="va">mediator</span>,</span>
<span>    EMint <span class="op">=</span> <span class="va">engine_args</span><span class="op">$</span><span class="va">EMint</span> <span class="op"><a href="https://rdrr.io/r/base/Control.html" class="external-link">%||%</a></span> <span class="cn">FALSE</span>,</span>
<span>    <span class="co"># ... more CMAverse arguments</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span>  <span class="co"># Extract to standardized MediationData</span></span>
<span>  <span class="fu"><a href="reference/MediationData.html">MediationData</a></span><span class="op">(</span></span>
<span>    a_path <span class="op">=</span> <span class="va">cma_result</span><span class="op">$</span><span class="va">effect.pe</span><span class="op">[</span><span class="st">"a"</span><span class="op">]</span>,</span>
<span>    b_path <span class="op">=</span> <span class="va">cma_result</span><span class="op">$</span><span class="va">effect.pe</span><span class="op">[</span><span class="st">"b"</span><span class="op">]</span>,</span>
<span>    <span class="co"># ... extract all components</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p><strong>Coordination Point</strong>: - medfit provides adapter infrastructure - CMAverse in <code>Suggests</code>, not <code>Imports</code> - Each engine adapter is self-contained function - All engines return <code>MediationData</code></p>
<hr></div>
<div class="section level4">
<h4 id="id_3-bootstrap_mediation---bootstrap-inference-generic">3. <code>bootstrap_mediation()</code> - Bootstrap Inference Generic<a class="anchor" aria-label="anchor" href="#id_3-bootstrap_mediation---bootstrap-inference-generic"></a></h4>
<p><strong>Purpose</strong>: Compute bootstrap CIs for indirect effects</p>
<p><strong>Current Methods</strong>:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/bootstrap_mediation.html">bootstrap_mediation</a></span><span class="op">(</span></span>
<span>  <span class="va">object</span>,              <span class="co"># MediationData object</span></span>
<span>  statistic <span class="op">=</span> <span class="va">indirect_effect</span>,  <span class="co"># Function: MediationData -&gt; scalar</span></span>
<span>  method <span class="op">=</span> <span class="st">"parametric"</span>,         <span class="co"># or "nonparametric", "plugin"</span></span>
<span>  n_boot <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  ci_level <span class="op">=</span> <span class="fl">0.95</span>,</span>
<span>  parallel <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  seed <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><strong>Statistic Functions</strong> (helper-test-data.R pattern):</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Indirect effect (default)</span></span>
<span><span class="va">indirect_effect</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">med_data</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">med_data</span><span class="op">@</span><span class="va">a_path</span> <span class="op">*</span> <span class="va">med_data</span><span class="op">@</span><span class="va">b_path</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Total effect</span></span>
<span><span class="va">total_effect</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">med_data</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">med_data</span><span class="op">@</span><span class="va">a_path</span> <span class="op">*</span> <span class="va">med_data</span><span class="op">@</span><span class="va">b_path</span> <span class="op">+</span> <span class="va">med_data</span><span class="op">@</span><span class="va">c_prime</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Proportion mediated</span></span>
<span><span class="va">proportion_mediated</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">med_data</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">indirect</span> <span class="op">&lt;-</span> <span class="va">med_data</span><span class="op">@</span><span class="va">a_path</span> <span class="op">*</span> <span class="va">med_data</span><span class="op">@</span><span class="va">b_path</span></span>
<span>  <span class="va">total</span> <span class="op">&lt;-</span> <span class="va">indirect</span> <span class="op">+</span> <span class="va">med_data</span><span class="op">@</span><span class="va">c_prime</span></span>
<span>  <span class="va">indirect</span> <span class="op">/</span> <span class="va">total</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p><strong>Coordination Point</strong>: probmed/RMediation can provide custom statistic functions for P_med/DOP/MBCO</p>
<hr></div>
</div>
</div>
<div class="section level2">
<h2 id="id_-mediationverse-loading-coordination">üåê mediationverse Loading Coordination<a class="anchor" aria-label="anchor" href="#id_-mediationverse-loading-coordination"></a></h2>
<div class="section level3">
<h3 id="current-mediationverse-structure">Current mediationverse Structure<a class="anchor" aria-label="anchor" href="#current-mediationverse-structure"></a></h3>
<p>From <code>mediationverse/R/attach.R</code>:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">core</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"medfit"</span>, <span class="st">"probmed"</span>, <span class="st">"RMediation"</span>, <span class="st">"medrobust"</span>, <span class="st">"medsim"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Startup message shows:</span></span>
<span><span class="co"># - Package versions</span></span>
<span><span class="co"># - Conflicts</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="proposed-loading-strategy">Proposed Loading Strategy<a class="anchor" aria-label="anchor" href="#proposed-loading-strategy"></a></h3>
<div class="section level4">
<h4 id="option-1-load-all-packages-tidyverse-pattern">Option 1: Load All Packages (tidyverse pattern)<a class="anchor" aria-label="anchor" href="#option-1-load-all-packages-tidyverse-pattern"></a></h4>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">mediationverse</span><span class="op">)</span></span>
<span><span class="co"># Attaches: medfit, probmed, RMediation, medrobust, medsim</span></span>
<span><span class="co"># Message:</span></span>
<span><span class="co"># ‚îÄ‚îÄ Attaching mediationverse 0.1.0 ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</span></span>
<span><span class="co"># ‚úî medfit     0.1.0     ‚úî probmed    0.2.0</span></span>
<span><span class="co"># ‚úî RMediation 2.1.0     ‚úî medrobust  0.1.0</span></span>
<span><span class="co"># ‚úî medsim     1.0.0</span></span>
<span><span class="co"># ‚îÄ‚îÄ Conflicts ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</span></span>
<span><span class="co"># ‚úñ medfit::fit_mediation() masks probmed::fit_mediation()</span></span></code></pre></div>
<p><strong>Pros</strong>: - Convenient for users - Full ecosystem available</p>
<p><strong>Cons</strong>: - Loads packages user may not need - Potential namespace conflicts</p>
<hr></div>
<div class="section level4">
<h4 id="option-2-selective-loading-recommended">Option 2: Selective Loading (recommended)<a class="anchor" aria-label="anchor" href="#option-2-selective-loading-recommended"></a></h4>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">mediationverse</span><span class="op">)</span></span>
<span><span class="co"># Attaches ONLY: medfit (foundation always loaded)</span></span>
<span><span class="co"># Message:</span></span>
<span><span class="co"># ‚îÄ‚îÄ Attaching mediationverse 0.1.0 ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</span></span>
<span><span class="co"># ‚úî medfit 0.1.0 (foundation package)</span></span>
<span><span class="co"># ‚Ñπ Use library(probmed) for P_med effect size</span></span>
<span><span class="co"># ‚Ñπ Use library(RMediation) for DOP/MBCO inference</span></span>
<span><span class="co"># ‚Ñπ Use library(medrobust) for sensitivity analysis</span></span>
<span><span class="co"># ‚Ñπ Use library(medsim) for simulation utilities</span></span></code></pre></div>
<p><strong>Implementation</strong>:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># mediationverse/R/attach.R</span></span>
<span><span class="va">.onAttach</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">libname</span>, <span class="va">pkgname</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co"># Only attach medfit by default</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://data-wise.github.io/medfit/">medfit</a></span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">packageStartupMessage</a></span><span class="op">(</span></span>
<span>    <span class="st">"‚îÄ‚îÄ Attaching mediationverse "</span>, <span class="fu">utils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/utils/packageDescription.html" class="external-link">packageVersion</a></span><span class="op">(</span><span class="st">"mediationverse"</span><span class="op">)</span>, <span class="st">" ‚îÄ‚îÄ\n"</span>,</span>
<span>    <span class="st">"‚úî medfit "</span>, <span class="fu">utils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/utils/packageDescription.html" class="external-link">packageVersion</a></span><span class="op">(</span><span class="st">"medfit"</span><span class="op">)</span>, <span class="st">" (foundation package)\n"</span>,</span>
<span>    <span class="st">"‚Ñπ Use library(probmed) for P_med effect size\n"</span>,</span>
<span>    <span class="st">"‚Ñπ Use library(RMediation) for DOP/MBCO inference\n"</span>,</span>
<span>    <span class="st">"‚Ñπ Use library(medrobust) for sensitivity analysis\n"</span>,</span>
<span>    <span class="st">"‚Ñπ Use library(medsim) for simulation utilities\n"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p><strong>Pros</strong>: - Clean namespace - User loads only what they need - medfit always available (foundation)</p>
<p><strong>Cons</strong>: - Requires explicit library() calls for other packages</p>
<hr></div>
<div class="section level4">
<h4 id="option-3-hybrid-tidyversetidyverse_packages-pattern">Option 3: Hybrid (tidyverse::tidyverse_packages() pattern)<a class="anchor" aria-label="anchor" href="#option-3-hybrid-tidyversetidyverse_packages-pattern"></a></h4>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">mediationverse</span><span class="op">)</span></span>
<span><span class="co"># Attaches: medfit (foundation)</span></span>
<span></span>
<span><span class="co"># User can load selectively</span></span>
<span><span class="fu">mediationverse_packages</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># Returns: c("medfit", "probmed", "RMediation", "medrobust", "medsim")</span></span>
<span></span>
<span><span class="co"># Or load all</span></span>
<span><span class="fu">mediationverse_load_all</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># Attaches all packages</span></span></code></pre></div>
<p><strong>Pros</strong>: Flexibility, clear default, opt-in for full load <strong>Cons</strong>: More complex API</p>
<hr></div>
</div>
<div class="section level3">
<h3 id="recommended-option-2-selective-loading">Recommended: Option 2 (Selective Loading)<a class="anchor" aria-label="anchor" href="#recommended-option-2-selective-loading"></a></h3>
<p><strong>Rationale</strong>: - medfit is foundation, always needed - Other packages serve different use cases - User typically needs 1-2 packages per analysis - Clean namespace reduces conflicts</p>
<hr></div>
</div>
<div class="section level2">
<h2 id="id_-package-integration-workflows">üîÄ Package Integration Workflows<a class="anchor" aria-label="anchor" href="#id_-package-integration-workflows"></a></h2>
<div class="section level3">
<h3 id="workflow-1-probmed-integration">Workflow 1: probmed Integration<a class="anchor" aria-label="anchor" href="#workflow-1-probmed-integration"></a></h3>
<p><strong>Before medfit</strong>:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">probmed</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># probmed had its own extraction</span></span>
<span><span class="va">fit_m</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">M</span> <span class="op">~</span> <span class="va">X</span>, data <span class="op">=</span> <span class="va">data</span><span class="op">)</span></span>
<span><span class="va">fit_y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">Y</span> <span class="op">~</span> <span class="va">X</span> <span class="op">+</span> <span class="va">M</span>, data <span class="op">=</span> <span class="va">data</span><span class="op">)</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">compute_pmed</span><span class="op">(</span><span class="va">fit_m</span>, <span class="va">fit_y</span>, treatment <span class="op">=</span> <span class="st">"X"</span>, mediator <span class="op">=</span> <span class="st">"M"</span><span class="op">)</span></span></code></pre></div>
<p><strong>After medfit</strong>:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">mediationverse</span><span class="op">)</span>  <span class="co"># Loads medfit</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">probmed</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># probmed uses medfit extraction</span></span>
<span><span class="va">med_data</span> <span class="op">&lt;-</span> <span class="fu">medfit</span><span class="fu">::</span><span class="fu"><a href="reference/extract_mediation.html">extract_mediation</a></span><span class="op">(</span></span>
<span>  <span class="va">fit_m</span>, model_y <span class="op">=</span> <span class="va">fit_y</span>,</span>
<span>  treatment <span class="op">=</span> <span class="st">"X"</span>, mediator <span class="op">=</span> <span class="st">"M"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">probmed</span><span class="fu">::</span><span class="fu">compute_pmed</span><span class="op">(</span><span class="va">med_data</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Or, probmed wrapper maintains backward compatibility</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">probmed</span><span class="fu">::</span><span class="fu">compute_pmed</span><span class="op">(</span><span class="va">fit_m</span>, <span class="va">fit_y</span>, treatment <span class="op">=</span> <span class="st">"X"</span>, mediator <span class="op">=</span> <span class="st">"M"</span><span class="op">)</span></span>
<span><span class="co"># Internally calls medfit::extract_mediation()</span></span></code></pre></div>
<p><strong>Migration Strategy</strong>: 1. probmed adds <code>medfit</code> to Imports 2. probmed keeps formula interface, calls medfit internally 3. probmed removes duplicated extraction code 4. probmed adds <code>compute_pmed.MediationData</code> method 5. Backward compatibility maintained</p>
<hr></div>
<div class="section level3">
<h3 id="workflow-2-rmediation-integration">Workflow 2: RMediation Integration<a class="anchor" aria-label="anchor" href="#workflow-2-rmediation-integration"></a></h3>
<p><strong>Before medfit</strong>:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://data-wise.github.io/rmediation/" class="external-link">RMediation</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># RMediation had its own extraction (from lavaan)</span></span>
<span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu">lavaan</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/lavaan/man/sem.html" class="external-link">sem</a></span><span class="op">(</span><span class="va">model</span>, data <span class="op">=</span> <span class="va">data</span><span class="op">)</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">medci</span><span class="op">(</span><span class="va">fit</span>, type <span class="op">=</span> <span class="st">"dop"</span><span class="op">)</span></span></code></pre></div>
<p><strong>After medfit</strong>:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">mediationverse</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://data-wise.github.io/rmediation/" class="external-link">RMediation</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># RMediation uses medfit extraction</span></span>
<span><span class="va">med_data</span> <span class="op">&lt;-</span> <span class="fu">medfit</span><span class="fu">::</span><span class="fu"><a href="reference/extract_mediation.html">extract_mediation</a></span><span class="op">(</span><span class="va">fit</span>, treatment <span class="op">=</span> <span class="st">"X"</span>, mediator <span class="op">=</span> <span class="st">"M"</span><span class="op">)</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">RMediation</span><span class="fu">::</span><span class="fu">medci</span><span class="op">(</span><span class="va">med_data</span>, type <span class="op">=</span> <span class="st">"dop"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Or, RMediation wrapper maintains backward compatibility</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">RMediation</span><span class="fu">::</span><span class="fu">medci</span><span class="op">(</span><span class="va">fit</span>, type <span class="op">=</span> <span class="st">"dop"</span><span class="op">)</span></span>
<span><span class="co"># Internally calls medfit::extract_mediation()</span></span></code></pre></div>
<hr></div>
<div class="section level3">
<h3 id="workflow-3-medrobust-integration">Workflow 3: medrobust Integration<a class="anchor" aria-label="anchor" href="#workflow-3-medrobust-integration"></a></h3>
<p><strong>medrobust uses medfit optionally</strong>:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">mediationverse</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">medrobust</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># medrobust can compute naive estimate via medfit</span></span>
<span><span class="va">naive</span> <span class="op">&lt;-</span> <span class="fu">medfit</span><span class="fu">::</span><span class="fu"><a href="reference/fit_mediation.html">fit_mediation</a></span><span class="op">(</span></span>
<span>  formula_y <span class="op">=</span> <span class="va">Y</span> <span class="op">~</span> <span class="va">X</span> <span class="op">+</span> <span class="va">M</span>,</span>
<span>  formula_m <span class="op">=</span> <span class="va">M</span> <span class="op">~</span> <span class="va">X</span>,</span>
<span>  data <span class="op">=</span> <span class="va">data</span>,</span>
<span>  treatment <span class="op">=</span> <span class="st">"X"</span>,</span>
<span>  mediator <span class="op">=</span> <span class="st">"M"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Then sensitivity bounds</span></span>
<span><span class="va">bounds</span> <span class="op">&lt;-</span> <span class="fu">medrobust</span><span class="fu">::</span><span class="fu">sensitivity_bounds</span><span class="op">(</span></span>
<span>  naive <span class="op">=</span> <span class="va">naive</span>,</span>
<span>  rho_range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">0.5</span>, <span class="fl">0.5</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><strong>medrobust doesn‚Äôt require medfit</strong>, but can use it for convenience.</p>
<hr></div>
</div>
<div class="section level2">
<h2 id="id_Ô∏è-implementation-timeline">üóìÔ∏è Implementation Timeline<a class="anchor" aria-label="anchor" href="#id_%EF%B8%8F-implementation-timeline"></a></h2>
<div class="section level3">
<h3 id="phase-1-medfit-mvp-this-week-dec-15-21">Phase 1: medfit MVP (This Week, Dec 15-21)<a class="anchor" aria-label="anchor" href="#phase-1-medfit-mvp-this-week-dec-15-21"></a></h3>
<p><strong>Status</strong>: 75% complete, 241 tests ready</p>
<p><strong>Remaining Tasks</strong>: - [ ] Implement <code><a href="reference/bootstrap_mediation.html">bootstrap_mediation()</a></code> (3-4 hr, 27 tests activate) - [ ] Implement <code><a href="reference/fit_mediation.html">fit_mediation()</a></code> (2-3 hr, 30 tests activate) - [ ] Roxygen2 documentation (2 hr) - [ ] R CMD check passing (1 hr) - [ ] Intro vignette (2 hr) - [ ] Tag v0.1.0</p>
<p><strong>Deliverable</strong>: medfit v0.1.0 ready for ecosystem integration</p>
<hr></div>
<div class="section level3">
<h3 id="phase-2-probmed-integration-week-of-dec-22-28">Phase 2: probmed Integration (Week of Dec 22-28)<a class="anchor" aria-label="anchor" href="#phase-2-probmed-integration-week-of-dec-22-28"></a></h3>
<p><strong>Tasks</strong>: 1. <strong>Update probmed DESCRIPTION</strong> <code>Imports:        medfit (&gt;= 0.1.0),        # ... existing imports</code></p>
<ol start="2" style="list-style-type: decimal"><li>
<p><strong>Refactor probmed extraction</strong></p>
<ul><li>Remove <code>probmed::extract_mediation_lm()</code>
</li>
<li>Remove <code>probmed::extract_mediation_lavaan()</code>
</li>
<li>Call <code><a href="reference/extract_mediation.html">medfit::extract_mediation()</a></code> instead</li>
</ul></li>
<li>
<p><strong>Add S7 method for P_med</strong></p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># In probmed</span></span>
<span><span class="fu">S7</span><span class="fu">::</span><span class="fu"><a href="https://rconsortium.github.io/S7/reference/method.html" class="external-link">method</a></span><span class="op">(</span><span class="va">compute_pmed</span>, <span class="fu">medfit</span><span class="fu">::</span><span class="va"><a href="reference/MediationData.html">MediationData</a></span><span class="op">)</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">object</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co"># P_med computation using medfit structure</span></span>
<span><span class="op">}</span></span></code></pre></div>
</li>
<li>
<p><strong>Maintain backward compatibility</strong></p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># probmed wrapper</span></span>
<span><span class="va">compute_pmed</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">fit_m</span>, <span class="va">fit_y</span> <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">inherits</a></span><span class="op">(</span><span class="va">fit_m</span>, <span class="st">"medfit::MediationData"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="co"># New path: MediationData provided</span></span>
<span>    <span class="fu">compute_pmed.MediationData</span><span class="op">(</span><span class="va">fit_m</span>, <span class="va">...</span><span class="op">)</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>    <span class="co"># Old path: fit objects provided, extract with medfit</span></span>
<span>    <span class="va">med_data</span> <span class="op">&lt;-</span> <span class="fu">medfit</span><span class="fu">::</span><span class="fu"><a href="reference/extract_mediation.html">extract_mediation</a></span><span class="op">(</span><span class="va">fit_m</span>, model_y <span class="op">=</span> <span class="va">fit_y</span>, <span class="va">...</span><span class="op">)</span></span>
<span>    <span class="fu">compute_pmed.MediationData</span><span class="op">(</span><span class="va">med_data</span>, <span class="va">...</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span></code></pre></div>
</li>
<li>
<p><strong>Update probmed tests</strong></p>
<ul><li>Test MediationData input</li>
<li>Test backward compatibility</li>
<li>Integration tests with medfit</li>
</ul></li>
<li>
<p><strong>Update probmed documentation</strong></p>
<ul><li>Mention medfit dependency</li>
<li>Examples using medfit::extract_mediation()</li>
</ul></li>
</ol><p><strong>Deliverable</strong>: probmed v0.2.0 using medfit</p>
<hr></div>
<div class="section level3">
<h3 id="phase-3-mediationverse-loading-week-of-dec-22-28">Phase 3: mediationverse Loading (Week of Dec 22-28)<a class="anchor" aria-label="anchor" href="#phase-3-mediationverse-loading-week-of-dec-22-28"></a></h3>
<p><strong>Tasks</strong>: 1. <strong>Update mediationverse DESCRIPTION</strong> <code>Imports:        medfit (&gt;= 0.1.0),        probmed (&gt;= 0.2.0),        RMediation (&gt;= 2.1.0),        medrobust,        medsim</code></p>
<ol start="2" style="list-style-type: decimal"><li>
<p><strong>Implement selective loading</strong> (Option 2)</p>
<ul><li>Update <code>R/attach.R</code> to only attach medfit</li>
<li>Helpful startup message</li>
<li>Document in README</li>
</ul></li>
<li>
<p><strong>Add utility functions</strong></p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># mediationverse/R/packages.R</span></span>
<span><span class="va">mediationverse_packages</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"medfit"</span>, <span class="st">"probmed"</span>, <span class="st">"RMediation"</span>, <span class="st">"medrobust"</span>, <span class="st">"medsim"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">mediationverse_conflicts</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co"># Show function conflicts across packages</span></span>
<span><span class="op">}</span></span></code></pre></div>
</li>
<li>
<p><strong>Update mediationverse README</strong></p>
<ul><li>Show ecosystem architecture diagram</li>
<li>Loading strategy</li>
<li>Example workflows</li>
</ul></li>
</ol><p><strong>Deliverable</strong>: mediationverse v0.1.0 meta-package functional</p>
<hr></div>
<div class="section level3">
<h3 id="phase-4-rmediation-integration-week-of-dec-29---jan-4">Phase 4: RMediation Integration (Week of Dec 29 - Jan 4)<a class="anchor" aria-label="anchor" href="#phase-4-rmediation-integration-week-of-dec-29---jan-4"></a></h3>
<p><strong>Tasks</strong>: 1. Update RMediation to use medfit extraction (optional, since RMediation is on CRAN) 2. Coordinate with maintainer 3. Test integration</p>
<p><strong>Deliverable</strong>: RMediation updated (or documented as optional integration)</p>
<hr></div>
<div class="section level3">
<h3 id="phase-5-cmaverse-engine-adapters-q1-2026">Phase 5: CMAverse Engine Adapters (Q1 2026)<a class="anchor" aria-label="anchor" href="#phase-5-cmaverse-engine-adapters-q1-2026"></a></h3>
<p><strong>Post-MVP feature</strong>: Add gformula and ipw engines</p>
<p><strong>Tasks</strong>: 1. Design engine adapter interface 2. Implement <code>.fit_mediation_gformula()</code> 3. Implement <code>.fit_mediation_ipw()</code> 4. Add CMAverse to Suggests 5. Documentation and examples 6. Integration tests</p>
<p><strong>Deliverable</strong>: medfit v0.2.0 with CMAverse support</p>
<hr></div>
</div>
<div class="section level2">
<h2 id="id_-coordination-checkpoints">üéØ Coordination Checkpoints<a class="anchor" aria-label="anchor" href="#id_-coordination-checkpoints"></a></h2>
<div class="section level3">
<h3 id="before-releasing-medfit-v010">Before Releasing medfit v0.1.0<a class="anchor" aria-label="anchor" href="#before-releasing-medfit-v010"></a></h3>
<ul class="task-list"><li><label><input type="checkbox">Confirm API stability with probmed team</label></li>
<li><label><input type="checkbox">Confirm API stability with RMediation team</label></li>
<li><label><input type="checkbox">Confirm API stability with medrobust team</label></li>
<li><label><input type="checkbox">API frozen (no breaking changes without coordination)</label></li>
</ul></div>
<div class="section level3">
<h3 id="before-releasing-probmed-v020-with-medfit">Before Releasing probmed v0.2.0 (with medfit)<a class="anchor" aria-label="anchor" href="#before-releasing-probmed-v020-with-medfit"></a></h3>
<ul class="task-list"><li><label><input type="checkbox">medfit v0.1.0 on CRAN (or at least stable)</label></li>
<li><label><input type="checkbox">Integration tests passing</label></li>
<li><label><input type="checkbox">Backward compatibility verified</label></li>
<li><label><input type="checkbox">NEWS.md documents migration</label></li>
</ul></div>
<div class="section level3">
<h3 id="before-releasing-mediationverse-v010">Before Releasing mediationverse v0.1.0<a class="anchor" aria-label="anchor" href="#before-releasing-mediationverse-v010"></a></h3>
<ul class="task-list"><li><label><input type="checkbox">medfit v0.1.0 available</label></li>
<li><label><input type="checkbox">probmed v0.2.0 available</label></li>
<li><label><input type="checkbox">Loading mechanism tested</label></li>
<li><label><input type="checkbox">README shows ecosystem architecture</label></li>
<li><label><input type="checkbox">All cross-package examples work</label></li>
</ul><hr></div>
</div>
<div class="section level2">
<h2 id="id_-success-metrics">üìä Success Metrics<a class="anchor" aria-label="anchor" href="#id_-success-metrics"></a></h2>
<div class="section level3">
<h3 id="technical-metrics">Technical Metrics<a class="anchor" aria-label="anchor" href="#technical-metrics"></a></h3>
<ul class="task-list"><li><label><input type="checkbox">Code duplication reduced by &gt;50%</label></li>
<li><label><input type="checkbox">All integration tests passing</label></li>
<li><label><input type="checkbox">R CMD check passing for all packages</label></li>
<li><label><input type="checkbox">&gt;90% test coverage in medfit</label></li>
<li><label><input type="checkbox">Zero breaking changes in migration</label></li>
</ul></div>
<div class="section level3">
<h3 id="user-experience-metrics">User Experience Metrics<a class="anchor" aria-label="anchor" href="#user-experience-metrics"></a></h3>
<ul class="task-list"><li><label><input type="checkbox">Existing probmed code works without changes</label></li>
<li><label><input type="checkbox">Existing RMediation code works without changes</label></li>
<li><label><input type="checkbox">Clear migration guides available</label></li>
<li><label><input type="checkbox">Example workflows documented</label></li>
<li><label><input type="checkbox">Startup message helpful and non-intrusive</label></li>
</ul><hr></div>
</div>
<div class="section level2">
<h2 id="id_-open-questions">üöß Open Questions<a class="anchor" aria-label="anchor" href="#id_-open-questions"></a></h2>
<div class="section level3">
<h3 id="id_1-mediationverse-loading-strategy---needs-decision">1. mediationverse Loading Strategy - NEEDS DECISION<a class="anchor" aria-label="anchor" href="#id_1-mediationverse-loading-strategy---needs-decision"></a></h3>
<p><strong>Question</strong>: Load all packages or just medfit?</p>
<p><strong>Options</strong>: - A. Load all (tidyverse pattern) - B. Load only medfit (recommended) - C. Hybrid (opt-in for all)</p>
<p><strong>Recommendation</strong>: Option B (selective loading)</p>
<p><strong>Decision needed by</strong>: Before mediationverse v0.1.0 release</p>
<hr></div>
<div class="section level3">
<h3 id="id_2-cmaverse-integration-priority">2. CMAverse Integration Priority<a class="anchor" aria-label="anchor" href="#id_2-cmaverse-integration-priority"></a></h3>
<p><strong>Question</strong>: Implement CMAverse engines in medfit v0.1.0 or defer to v0.2.0?</p>
<p><strong>Options</strong>: - A. Include in v0.1.0 (delays MVP) - B. Defer to v0.2.0 (recommended, get medfit stable first)</p>
<p><strong>Recommendation</strong>: Option B (v0.2.0)</p>
<p><strong>Decision needed by</strong>: medfit MVP milestone</p>
<hr></div>
<div class="section level3">
<h3 id="id_3-breaking-changes-policy">3. Breaking Changes Policy<a class="anchor" aria-label="anchor" href="#id_3-breaking-changes-policy"></a></h3>
<p><strong>Question</strong>: How to handle breaking changes in medfit after ecosystem adoption?</p>
<p><strong>Recommendation</strong>: - Semantic versioning (major.minor.patch) - Breaking changes only in major versions - Deprecation warnings one version ahead - Coordinated releases across ecosystem</p>
<p><strong>Decision needed by</strong>: Before medfit v0.1.0 release</p>
<hr></div>
<div class="section level3">
<h3 id="id_4-cran-submission-order">4. CRAN Submission Order<a class="anchor" aria-label="anchor" href="#id_4-cran-submission-order"></a></h3>
<p><strong>Question</strong>: What order to submit to CRAN?</p>
<p><strong>Options</strong>: - A. medfit ‚Üí probmed ‚Üí mediationverse - B. All simultaneously - C. medfit alone, others later</p>
<p><strong>Recommendation</strong>: Option A (sequential, reduces risk)</p>
<p><strong>Rationale</strong>: - medfit must be on CRAN for others to depend on it - probmed updates after medfit available - mediationverse releases when all packages ready</p>
<hr></div>
</div>
<div class="section level2">
<h2 id="id_-next-immediate-actions">üí° Next Immediate Actions<a class="anchor" aria-label="anchor" href="#id_-next-immediate-actions"></a></h2>
<div class="section level3">
<h3 id="this-week-dec-15-21-complete-medfit-mvp">This Week (Dec 15-21): Complete medfit MVP<a class="anchor" aria-label="anchor" href="#this-week-dec-15-21-complete-medfit-mvp"></a></h3>
<ol style="list-style-type: decimal"><li>
<p><strong>Implement core functions</strong> (8-10 hrs total)</p>
<ul><li>bootstrap_mediation() - 3-4 hr</li>
<li>fit_mediation() - 2-3 hr</li>
<li>Documentation - 2 hr</li>
<li>R CMD check fixes - 1 hr</li>
</ul></li>
<li><p><strong>Commit and push to dev branch</strong></p></li>
<li><p><strong>Create medfit v0.1.0-alpha tag</strong></p></li>
<li>
<p><strong>Notify ecosystem</strong></p>
<ul><li>Create GitHub discussion in mediationverse</li>
<li>Notify probmed/RMediation/medrobust maintainers</li>
<li>Share API documentation</li>
</ul></li>
</ol><hr></div>
<div class="section level3">
<h3 id="next-week-dec-22-28-integration-testing">Next Week (Dec 22-28): Integration Testing<a class="anchor" aria-label="anchor" href="#next-week-dec-22-28-integration-testing"></a></h3>
<ol style="list-style-type: decimal"><li>
<strong>Test probmed integration</strong> (in separate branch)
<ul><li>Update probmed DESCRIPTION</li>
<li>Refactor extraction code</li>
<li>Run tests</li>
<li>Document findings</li>
</ul></li>
<li>
<strong>Test mediationverse loading</strong>
<ul><li>Implement Option 2 (selective loading)</li>
<li>Test conflicts</li>
<li>Update README</li>
</ul></li>
<li>
<strong>Integration test suite</strong>
<ul><li>Cross-package workflows</li>
<li>Backward compatibility tests</li>
</ul></li>
</ol><hr></div>
<div class="section level3">
<h3 id="following-week-dec-29---jan-4-polish--release">Following Week (Dec 29 - Jan 4): Polish &amp; Release<a class="anchor" aria-label="anchor" href="#following-week-dec-29---jan-4-polish--release"></a></h3>
<ol style="list-style-type: decimal"><li><strong>Address integration issues</strong></li>
<li><strong>Finalize documentation</strong></li>
<li><strong>Prepare CRAN submissions</strong></li>
<li>
<strong>Tag releases</strong>: medfit v0.1.0, probmed v0.2.0, mediationverse v0.1.0</li>
</ol><hr></div>
</div>
<div class="section level2">
<h2 id="id_-reference-documents">üìö Reference Documents<a class="anchor" aria-label="anchor" href="#id_-reference-documents"></a></h2>
<div class="section level3">
<h3 id="strategic-planning-already-decided">Strategic Planning (Already Decided)<a class="anchor" aria-label="anchor" href="#strategic-planning-already-decided"></a></h3>
<ul><li>
<code>probmed/planning/three-package-ecosystem-strategy.md</code> - Foundation package decision</li>
<li>
<code>probmed/planning/model-engines-brainstorm.md</code> - CMAverse discussion</li>
<li>
<code>medfit/planning/medfit-roadmap.md</code> - Implementation plan</li>
</ul></div>
<div class="section level3">
<h3 id="coordination-documents-this-package">Coordination Documents (This Package)<a class="anchor" aria-label="anchor" href="#coordination-documents-this-package"></a></h3>
<ul><li>
<code>ECOSYSTEM-COORDINATION.md</code> - High-level options and decision matrix</li>
<li>
<code>COORDINATION-BRAINSTORM.md</code> - This document (implementation mechanics)</li>
<li>
<code>CLAUDE.md</code> - Package development guidelines</li>
<li>
<code>.STATUS</code> - Current progress tracking</li>
</ul><hr><p><strong>Last Updated</strong>: 2025-12-15 <strong>Status</strong>: Active brainstorming, implementation starting this week <strong>Next Review</strong>: After medfit MVP complete (Dec 21, 2025)</p>
</div>
</div>
</div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://orcid.org/0000-0001-8523-7776" class="external-link">Davood Tofighi</a> Built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a></p>
</div>

<div class="pkgdown-footer-right">
  <p>Version {version}</p>
</div>

    </footer></div>





  
</body></html>

